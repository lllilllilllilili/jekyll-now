---
post : layout 
title : 데이터통신(기)4
---
## 복습

이게 왜 M으로 나눈거냐를 질문이 있었는데
그래서 여기에 대한 식이 잘 설명되지 않고 넘어간듯 싶어서
그래서 복습을 하고 다음에 진행을 함 여기 상황은 유저원이 이쪽이
여기에 상황은 유저원이 이 2bit를 보냄
1,0 
두번째 유저는 
1,1 을 보냄
각각 2bit씩
근데 자기에게 할당된 코드를 이용해서 cdma 방식으로 
이렇게 곱해서 보내게 됨
그러다 보니까 이것을 곱하면 여기에 여기 곱한값과 여기에 이걸 곱한값이 더해져서
앞에 8bit가 이런 모양이 나온다고 했고 뒤에 얘와 얘가 더해져서 이런 모양이 만들어짐
이 z라는 시그널은 두개가 합해진 시그널임 
거기로 부터 이 노테이션(???)들을 봐야되겠는데
여기서 지금 원하는 바는 구하고자 하는바는, 구하고자 하는바는
유저원 이게 위에 있는 첨자가 이게 원이 유저원임
여기는 유저투
위에 첨자가 유저의 아디임 
여기서 보면 유저원의 데이터인데 유저원의 데이터에 i번째 bit를 추출해내는 식임
유저원의 i번쨰 bit, 0부터 시작하니까
유저원의 0번째 bit,  첫번째 bit , 유저원의 두번쨰 bit 이렇게 되는데 그중에 한비트를 추출해내는 식임 
계속 진행이 됨 i가 0부터시작해서 0,1,2,3,4 가 됨 d0, di
유저원의 i번쨰 비트가 한비트를 추출해 내는 식인데 
4비트를 추출해낼때마다 이 식이 적용됨
zi번째 비트 i번쨰 인데(Z^mi) ci번쨰 (ppt 참고)
원 유저의 코드를 썸을 한다. M은 0부터 전체사이즈 M까지 여기서 라지 M이라는건 코드의 크기임 (M= 코드가 8bit 짜리)이 코드가 가령 8비트 짜리 코드니까 M=8임
이 식을 보면 이 속에는 z속에는 di, 원유저의 i번쨰 비트의 c * 원유저의 코드가 곱해진거고 + di의  두번쨰 유저의 코드가 곱해진거고 이런.. 1이 온거죠 
이게 Zi의 Zi , sum 이라는 의미로 의미없게(PPT 참고)
i번째 오는 시그널의 i번째 bit에 해당하는 부분은 이것임
여기에 M이 1부터 M까지 계속 곱한다 라는것은 바로 이 코드가 각각의코드가 지금 사이즈 M이라는 거임 그래서 각 코드의 자릿수 별로 곱해서 더한다. 코드가 간단하게 1 -1 1 1 이런식으로 4비트 짜리 코드라고 하면 자기 코드끼리 곱하면 똑같은 
이게 Ci라고 첫번째 유저의 코드라고 하면
첫번쨰 유저의 코드라고 하면 첫번째 유저의 C1*C1 이런 벡터 곱 자릿수 별로 곱 
이것을 sum으로 표현하기를 M=1부터 M까지 M은 4라고 함 결국 4

시그마(i~M까지)cm1*cm1 이런 표현이 됨 얘와 얘를 서로 곱하면 각 자릿수 별로 곱하게됨
첫번째 자리 1*1, 1을 더하고(썸이니까) -1 * -1, 1을 더하고 1*1 =1 더하고 1*1 을 더해서 1 이게 4가 됨 이게 equal M이 됨 
자기코드끼리 한번 벡터곱을 구하면 그 값이 항상 M임 
-1이면 -1을 곱하고 +1이면 +1 끼리 곱해서 계속 모든 곱한놈의 1이고 M번을 곱해서 더하니까 항상 M임 
그래서 M으로 나눠야지만 여기에 M으로 나누면 1 또는 -1 이 나오는거다. 왜냐하면 이 코드를 값에 애당초 여기에 d1의 i번째 bit 가 곱해진 값이 값이 왔는데 거기에 받은쪽에서 거기에 받은쪽에서 해당되는 코드를 곱한거니까 여기는 4가 아니라 4*di가 됨

이런 관계를 다 곱하면 이건 이렇게 하고 앞에 di*원유저 원래 값이 데이터에 코드를 곱한 값이니까 요렇게 되면 4di에 1이 되니까 이게 곧 M임 그래서 나누기 M을 하면 결국 요 값이 나옴
왜 M으로 나누느냐 는거 이 operation을 매 bit마다 함

매 bit 한다 라는 얘기는 이 상태에서는 이거 한덩어리에 대해서 수행하고 이렇게 
받은 값 이 한덩어리에 대해서 수행하고 

또 그다음에 덩어리 8bit 잘게 쪼갠 8bit가 들어오면 또 그것에 대해서 또 수행하고 이게 매 1bit 단위마다 수행을 함 

1또는 -1 값을 얻어냄 원래 데이터 1또는 0을 얻어내는 방식
이 operation이 1 bit 얻어내는데 수행되고 그다음에 여기서 이 수행됬던 똑같은 게 수행되는데 그다음에 i가 계속 바뀌는데 원 유저의 0번째 1번쨰 2번째 비트 정보를 추출하는 식을 도입함
도입하는 식임 
cdma 

자 우리 그 이런 공유하는 멀티플렉싱 방식으로 fdma 내가 
수업 초기에 이런 얘기를 했는지 모른다.
6장을 마무리하면서 
요고 하나만
pdma, cdma 
요게 뭐 ??? 할 
큰분류로 따지면 fdma, tdma, cdma를 배운것임
이 공통으로 사용하는 매체를 통해서 여러사람이 동시에 이 매체를 사용하는 방법 
멀티플렉싱 방법중에 크게 3분류 나눌 수 있음


cdma

우리 그 이런 , 여기에 이런 전번에 이런 얘기를 했음
같은 공간에, 방안에 여기에 지금 얘기를 주고 받는 두명씩 페어가 페어가 10명이 있다고 하자.
얘와 얘같다. 얘와 얘가 지금 얘기를 하는데 서로 떨어진 자리에서 이렇게 서로 이공간에서 말을 주고 받아야 한다. 그런경우에는 

(뭐 한 열명이 있다 이거임 여기에 얘와 얘가 통신을 하고 싶어하고 
애가 얘랑 얘기를 하는데 서로 떨어진 자리에서 이렇게 이 공간에서 말을 주고 받아야함)

그런 경우에는 fdma를 사용해서 이 세쌍이 서로 동시에 말을 주고 받는다 라는것은
서로 fdma 한다면은 어떻게 할까? 그래야 말이될까?
서로 상대방의 catch를(얘기를) 복잡한 소리속에서 상대방의 소리를 캐치하는 방법을 fdma을 사용함

서로 어떤 식으로 대화를 나눠보면 이런게 가능할까? 이런걸 적용할 수있나? 
fdma 말그대로 프리퀀시를 나눈것임 그래서 이 경우에는 어떻게 한단 말이냐
가령 이 두쌍은 굉장히 주파수대역은 높은 대역을 써서 얘기를 주고 받는단 얘기는
굉장히 하이톤으로 주고받음

아주 높은 고성으로 저 멀리 떨어진 사람간에 목소리 높혀서 하이톤으로
중간 다른 대역은 중간톤으로 얘기를 하고 이 다른 또 한편으로는 베이스로 얘기를 하면
이렇게 그 3소리가 합해지면서 들으면서 나는 베이스음만 추출해냄
아주 하이톤 만 추출해낸다던지 이런게 fdma 방식으로 동시에 변환을 한다???
간단한 예를 들어줄 수 있다.

tdm 방식으로 저 3쌍이 얘기를 한다 라는것은 시간을 나눠서 함
먼저 한쌍이 얘기하고 다른 쌍 얘기하고 그다음 다른 쌍 얘기하고 완전 시간을 나눠서 돌아가면서 각 페어 마다 얘기를 하는게 바로 tdma 방식임 
명확히 구별됨

cdma는 이 3쌍이 방안에서 동시에 말을 주고 받아야 하는데 이것은 명확히 이해가됨
cdma는 어떻게 하느냐 저건 무슨 장치가 필요함
하이톤을 톤을 목소리를 높이를 조절하거나 시간을 서로 나눈거나 그런거 없이 동시에 편한대로 얘기를 함 
굉장히 구별해내기가 힘듬 서로 비슷한 톤의 같은 시간에 여러 3명이 동시에 얘기하면 상대방의 얘기를 추출해내기 힘듬
그런데
바로 각자의 목소리에는 코드가 심어져 있어서 가령 내가 이어폰 하나 꽂고는 이어폰이라는 장치가 여기서 이 상대방, 내가 지금 얘기하고 있는 사람의 코드값을 곱하는 기능을 이 이어폰이 수행을 해줘야함 그래야지 여러소리가 들어왔지만 그중에 내가 상대 하고자 하는 사람 목소리만 걸러서 내귀에 들어옴
cdma는 개념적으로 그렇고 어찌보면 좀 복잡해 보기도함 한편으로는 굉장히 직관적임
직관적으로 제일 단순한 기능임
우리가 지금 프리퀀시, 시간 문제없이 코드라는 소프트웨어 도구를 이용해서 그냥 자유롭게 사용하는것임

효율이 가장 높은것은 이런저런 기준에 따라 다르지만 cdma는 fdma는 지금 통신을 주고 받은 이 라인이 제공하는 대역폭을 몇개로 나눌 수 있느냐 
제한된 대역폭을 n개로 나눠서 n개 가 다른 대역폭을 이용해서 통신을 이용함 제한된 자원임
tdma도 가령 이 나눠서 이렇게 나눔 큰 관을 이용하는데 시간을 나눠서 각각의 유저별로 자기 순서에만 다시 쓰고 이런식임 그럼 내 순서가 다시 오기 까지 나는 기다려야하고 유저가 많아 질수록 기다리는 시간이 많아짐 따라서 tdma는 유저의 수가 분명히 수가 분명히 제한될 수 밖에 없음 내 순서가 한바퀴돌아서 와야 하는데 이 나를 제외한 다른 사람 수 가 너무 많으면 10000명 기다렸다가 내 순서가 온다 그러면 딜레이가 굉장히 커짐 제한이 있는 있어 보이는 방식임

cdma는 그러면 어디에서 제한이 올까 그러면
어떤 제한이 올까?? 코드의 개수, 코드의 개수는 무한이 만들 수 있음 코드의 개수는 무한히 만들 수 있는데 무한이 만들 수 있단 얘기는 코드 길이가 길어짐, 코드길이가 계속 천명을 수용할때의 코드 길이와 십만명을 수용할떄의 코드길이는 분명히 십만개짜리로 서로 다른 오쏘코널한 코드 셋을찾기 에는 길이가 좀더 길어져야 함.

따라서 이 M이라는 사이즈가 점점 커짐
M이라는 사이즈가 점점 커진다. 스프레드 스펙트럼인데 내가 한 비트를 보내는데 무려 M비트 만큼 잘게 쪼개서 보내는거죠 여러개의 1과 -1 로 반복하면서 
밴드 위쓰가 내가 엄청 많이 필요함 한 비트만 보내는데도 이미 M 배 해서 보내야함 밴드위쓰를

코드 디비전도 그런식임 밴드위쓰, 코드가 늘어나면서 결국 내가 수용하는 , 필요로하는 대역폭이 점점 커진다. 라고하는 그런 문제점을 갖고 있음

그래서 각각의 문제점이 있는데 이것을 면밀하게 이제 해석을 분석을 해보면 누가 가령 제한된 조건에서 누가 가장 효율적일까 당연히 CDMA임 이런저런 이것뿐만 아니라 보안 측면에도 CDMA는 강력함 이 코드 값 자체가 스프레드 스펙트럼이 보안을 위해서 보안을 위해서 아이디어 나옴 
원래 CDMA는 군용 기술로 나온것임 쿼텀이라는 회사가 군용 통신 무선통신 과정에 보안이 강조되는 방식 특허권을 가지고 있음

이중에 보안도 확실하게 보장 하는 CDMA 성능도 뛰어난 CDMA 우리 초창기 이더넷 통신
셀룰라 폰 서비스 처음 시도될때 요 아날로그 방식이니까 가고
애초에 FDMA 아날로그 방식에서 시도했지만 그다음에 디지털 방식으로 들어오면서 어떤 방식으로 쓸까 전세계 적으로 고민할때 우리나라에서 최초로 CDMA방식의 셀룰라 폰 서비스를 수행함 시작함
이게 90년대 쯤
퀄컴이 그 특허권을 갖고 있는 기술을 이용해서 우리나라가 시험장이 됨
이렇게 과감하게 이 방식을 셀룰라 폰을 적용한 나라가 우라나라 최초임
퀄컴이라는 우리나라에 큰 빚을 짐 여전히 전화기 하나당 CDMA 쓰고 있는 전화기 하나당 지적재산권 료가 어마어마함
퀄컴이라는 회사는 이 기술로 우리나라로부터 엄청난 부를 축적함 간단한 아이디어 임
코드 생성하는거 간단한 아이디어로 오쏘고널 한 코드를 계속 만들 수 있음

이렇게 잘게 쪼개지니까 하드웨어 적으로 저런걸 만들어내는 기술적인 면이 상세한 필요함
어려운 기술이 들어감

7장은 물리적인 얘기고 트랜스미션 이 구역을 동축케이블이니 광케이블 이니 물리적인 특성을 
뭘 더 그냥 팩트들이 있음
팩트들은 그냥 보면됨
건너뛰고 8장

## Chapter 8 switching
멀티플렉싱 주제에 이어서 가장 적절하게 얘기가 될 수 있는게 스위칭임
멀티플렉싱 된 하나의 미디어를 여러사람이 동시에 사용하는 링크 
링크에 끝을 가보면 링크들이 동시에 사용하고 있는 링크의 끝이 스위치
여기가 스위치다. 그래서 스위치 ??? 은 여러가지 이 케이블이 여러갈래로 가야함
스위치라는게 스위치 역시 fdma, tdma 방식으로 공유를 하는 이런 링크를 갖고 전세계를 쭉 카바를 하는 네트워크가 만들어짐 
멀티플렉싱에 이놈들을 디멀티플렉싱 하고 다시 어느 동일한 단락으로 나가는 데이터를 다시 쉐어하면서 멀티플렉싱 하면서 내보냄 
고 가운데 기능이 스위치 라는 장치임 
인터넷 에서는 라우터임
이런 장치가 이제 어떤 식으로 동작을 하고 있고 
내부 모습까지 잠시 들여다 보는 내용이 8장임

## Switching
스위칭 구조에 아주 분류가 
회선교환(1장)
패킷 교환
큰 두가지 분류하에 각각 어떤 원리로 스위칭이 이루어지는지 살펴보고 
4장에서는 내부를 들여다 봄
서킷 스위칭 
패킷 스위치는 속이 어떤 모양인지 한번 들어다 보는게 8-4절이다.

## 교환 네트워크 종류
스위칭이라는건 개념적으로 간단함 
지리적으로 거리제한이 없는 장치들간에 패스를 만들어서 통신을 해야하는데
패스를 만들어낸 일대일로 각패스를 만들어 줄수있는거는
뭐 넌센스고
전세계적으로 일대일로 만들 수없음
백만개의 장치가 있으면 일대일로 만들려면 라인이 99만 9999 개가 있어야함
자기것을 제외한 나머지 유저들과의 일일히 다 더해줄려면
그 99만 9999개가 100만개 가 있어야함
백만 유저가 그만큼 라인을 가져야하니까
라인 수가 어마어마하고 넌센스함
결국은 공유하는 자원을 이용해서 스위치가 공유하는 링크를 이용해서 그때그때 필요에 따라서 
패스를 만들어줌

결국 패스를 만들어준 다음에는 결국 얘와 누군가와 이 패스를 만들어지고
또 얘는 누군가와 패스를 만들어지고
그래서 일대일 패스가 형성이됨
바로 그패스를 형성해주는기능이 스위치임
효과적으로 장치간에 일대일 연결을 만들어주는 장치들이 스위치임

스위치라는건 가변적임 따라서, 한시적으로 어떤 유저에게 주었던 패스를 이 유저들이 사용이끝나면 회수를 하고 또다른 유저에게 줄 수 있고
길을 다양하게 바꿔서 그런 패스를 만들어 줄 수 있다.
이런 우 멀티플렉싱 개념에서 이 패스가 만들어졌단 얘기는 이 한칸을 나에게 줌
이렇게 쫓아 가다 보면은 상대방 유저고 내 위치는 여채널이 제공하는 ??? 가 있음
채널하나를 나에게 줬음 
A 와 B사이에 멀티플렉싱되는 큰 트렁크? 라인에 한채널을 나에게 줌
FDMA방식으로 하면 이렇게 되는거고 
TDMA는 일일히 시간이 나눠지고 요런 한칸을 나에게 주는 셈이됨

한칸을 계속 그 링크가 목적지 까지 가는 링크상에 한 칸씩을 나에게 준상태가 됨
통화를 끊으면 이 칸은 남이 쓸 수 있는 것임
다른 사람이 쓸 수 있음 그게 바로 스위칭임 내가 쓸 수 있었던 것을 다른 사람이 쓸 수 있게 연결을 바꿔주는것임 그게 스위칭 개념임
(FDMA, TDMA 각각 개념에 대해서 나눠지는것이 뭔지 알면될듯.. 그냥 스위치는 가변적으로 할당해주고 회수한다고 이해하면 될듯)

교환, 아까 그 회선교환과 
넷 교환 방식의 서킷 교환과 패킷교환 
두가지 과정이 있는데
원래 메시지 스위칭이라는게 하나있음

우리책에는 제목만 나와있고 더 이상 설명이 없음
메시지 스위칭 이라는걸 설명

## 메시지 스위칭
패킷 스위칭의 원조임
메시지 교환은 내가 누구에게 보내고 자 하는 데이터 한덩어리를 전체를 하나로 잡고 
스토어 포워드 방식으로 축적과 전송 으로 여러 스위치를 거쳐가면은 이 소스 쪽에서 메시지 한덩어리 1메가 비트짜리 데이터를 만들어서 보낸다고 하면 이 한덩어리 전체를 제일 먼저 만나는 스위칭에게 보내고 스위치는 이 1메가 비트짜리 데이터를 몽땅 다 받은 다음에 주소를 보고 누구에게 보낼까 주소를 보고 그쪽으로 가는 길이 가용하면 그 한덩어리를 쭉 내보냄
그 다음 스위치는 모든것을 다 받은 다음에 똑같은 일을 반복 그게 바로 스토어 앤 포워드
일단 다 메시지 전체를 받아서 주소를 보고 가용한 길을 통해서 다시 쭉 보냄
한단위씩 한 단위가 메시지라는 얘긴데 
실제 패킷 교환이 뭐냐하면 
메시지 교환을 더 효율적으로 하는것임
여기는 메시지자체 큰덩어리 든 작은 덩어리든 아예 한덩어리로 다 ???
패킷 교환은 그 메시지를 네트워크에서 효율적으로 처리할 수 있는 처리 할 수 있는 적절한 사이즈 로 다 쪼개서 그거뿐임
1메가 비트 짜리 데이터를 덩어리 보내는건 비효율적임 왜냐하면 극단적인 예가 하나 있음
이런 예가 있음
가령 이 우리 패킷 , 서킷 스위칭을 제외한 패킷 교환이나 메시지 교환은 다 데이터 네트워크인데
내가 이 큐를 그림 서버가 보내는데 
가령 메시지 사이즈가 이만 한 놈이 하나 있고 요만한 놈이 하나 있다 두놈이 있다 그러면
어떻게 보내다 보니까 이 큰놈이 먼저옴
큰놈이 먼저 오면 이 작은 놈은 이 큰놈이 서비스 받기까지 기다려야함
엄청난 시간을 기다려야함 그거에 비해서 작은놈이 먼저왔으면 작은 놈이 먼저왔으면 큰놈은 요만큼만 기다린다. 서비스를 받아가는데
굉장히 언밸랜스 가 생김
네트워크에서 데이터들을 처리하는데 패킷 사이즈가 큰놈이 항 상 유리하고 다른 놈에게 엄청난 피해를 줌
비효율적임
패킷 사이즈를 작게 보내는 측면에서는 비효율적임
이런 덩어리들이 네트워크에서 여기저기 막 돌아다니면, 이런 얼밸런스한 서비스가 산재되고 누적되고 문제가 많이 생김 이걸 해결하는 방법은 이렇게 큰 사이즈를 허용하지 않음
다들 쪼개서 보내라 어느 적정한 사이즈로 데이터를 쪼개서 보내면 누구에게 특별한 특혜가 가는 방식으로 아닌 서비스가 이루어짐
패킷 스위칭이 나옴 메시지 전체를 보내지 말고 적절한 사이즈로 보내라
1메가 비트 짜리 로 보내는 입장에서는 1000비트로 1000개로 나눠서 보내라! 이런거임
메시지 전체사이즈가 아니라 패킷 이라는 단위로 데이터를 보내자 라고하는 개념이 패킷 교환이라고 발전을 함
아까 메시지 교환할때 스토어 포워드 라고 말했는데 패킷들이 스위치들이
스위치들이 스토어 앤 포워드 방식. 축적을 먼저하고 보냄
이런 기본적인 메카니즘은 패킷스위칭으로 가도 마찬가지임
단, 요만한 사이즈만 스토어하는 하니까 스토어 앤 포워드 
작아진 사이즈들로 다 오기까지 기다렸다가 거기들어있는 어드레스들을 보고 보내고
??? 반복하다가 스위치가 부지런히 일을 해야겠지만 기본적인 ?? 유지함
패킷 교환에서도 축적과 전송이라는 기본 아이디어는 메시지 교환에서 똑같이 방식을 쓰고 있음
다루는 메시지가 사이즈가 조금 효율적으로 바꼇다. 라는것임
메시지 교환을 패킷 교환 이 일부라고 일종이라고 생각하면 됨

3가지 분류가있는데
다시 4가지 요소가 나누고 있음
패킷 스위칭 네트워크가 
데이터 그램 네트워크와 버츄어 서킷 네트워크로 나뉨

그래서 결국 4가지가 되는데 요부분은 지금 설명하고 끝
메시지 스위칭은
간단함
큰덩어리 하나고 스위치 스토어 포워드 방식으로 보내는것이고
이게개선이되서 패킷 스위칭 네트워크가 왔으니까 이것을 봐야함

우리말로 표현하면 가상회선 (버츄어 서킷) 패킷 스위치드 네트워크인데 데이터그램 네트워크를 하다 보니까 뭔가좀 아쉬움이 있어서 이쪽이 어떤 장점이 있기떄문에 이 장점을 패킷 스위치에도 활용할 수 없을까해서 해서 생각해낸게 여기에 요개념을 집어 넣는게 이 개념임
가상 회선교환인데
패킷 스위치 네트워크에 분류가됨
우리가 지금 3가지를 깊게 살펴봄
서킷 스위치 네트워크, 데이터그램 네트워크, 버츄어 서킷 네트워크임

이미 버츄어 서킷과 서킷은 맥락을 같이함

## Circuit - Switched Networks
회선교환, 전화망
소개글을 살펴본다. 서킷 스위치드 네트워크는 물리적인 링크들로 연결된 스위치들에 셋으로 구성된다. 패킷 네트워크도 마찬가지 여기서 중요한얘기는 
커넥션이라는것은 두 스테이션간, 두 장치간에 연결이라는것은 바로 요게 중요함
dedicated path = 걔들에게만 아예 전폭, 점유되는 얘들만 단독적으로 사용되는 패스가되는데 커넥션이라는 것은
스위치들이 지나갈떄 채널단위로 어떤 특정한 유저에게 링크속에 채널단위로 누구에게 할당한다고 했는데 그개념이 여기에 얘기됨
하나 이상에 그 링크들로 이루어지는 얘들에게만 독단적으로 사용할 수있는 패스가 주어진다.
근데 패스라는게 무엇을 의미하냐면 그링크의 한 채널만 사용한다. 
스위치에서 분기되 나갈때 또다른 링크에서 한 채널만, 채널이라는게 fdma면 한 대역 그것만 얘기함 그런 한 채널들을 이 멀리 있는 유저간에 계속 거쳐가는 링크들속에 한 채널만을 계속 연속적으로 할당해주는것임
채널이 할당이 됨 채널 들이 연결이 되면서 패스를 이루어짐
각각의 링크는 그런 채널이, 일반적으로 n개 를 사용하고 있고
그 n개는 fdma 또는 tdma 방식으로 나눈다.
주파수 측면에서 나누거나 시간을 나눠서 쓰거나 어쨋든 이런 굵은 링크를 n개의 유저가 사용하도록 n개의 채널로 나누는데 그 나눈 방식 fdma, 또는 tdma 방식을 쓴다.

회선교환은 이 채널 수 가 n개면은 이 링크를 사용하고 있는 유저는 최대 n개밖에 못씀 한순간에 n개
이 경우에 멀티플렉서가 3개의 쓰고 있는데 n채널
3개 
a가 m과 통신하고 싶다 하면은 요 스위치로 연결이되서 
이 스위치가 제공하는 3개중에 아무거나 한 채널을 할당받아서 멀리 떨어져있는것은 이 큰 링크를 이용해서 가고 또 다시 여기 스위치 직접 가지 않고 스위치를 거쳐서 또 다른 패스, 또다른 스위치를 거쳐서 얘들 중에 이링크중에 어느 한 채널을 얻어야 하고 이중에 한 채널, 이중에 한 채널을 얻어서 결국 여기까지 패스가 만들어지는데 결국 채널들이 연결이되서 패스가 만들어짐

그래서 서킷 네트워크는 똑같은 말 이반복됨
n 채널을 갖는 링크들 채널을 갖는 링크들이 물리적으로 계속 연결된 스위치들에 네트워크이다.

그밑에 
그러면 이러한 서킷, 한채널이 할당된다는데 어떤 어떤 과정에 의해서 할당되느냐?
서킷 스위칭에서는 리소스가 예약이 되는데 채널이 누군가에게 주어지는데 셋업 단계에서는 주어진다.
데이터를 내가 보내기전에 저쪽 상대방과 이런 리소스 리져베이션이 일단 이루어져야함
채널할당이 먼저 이루어 져야함 = > 그게 셋업과정임
셋업 과정을 통해서 패스가 이루어지면은 내가 이 통화를 끊기 전까지는 그 패스는 이제 이 리소스는 이 유저곧 두개 유저 사이에서만 쓸 수 있음
패스를 끊을 떄까 => teardown phase 끊는 단계 까지는 이 통화를 계속 유지한다. 그게 바로 서킷 스위칭의 개념임

## 8.1
넘어감

## 회선 교환 네트워크 
4개 유저가 각각 떨어져있는 
서로 네쌍이 만들어짐
분기되서 스위칭이 이루어지고

그다음에 껏은 어느 회사 에 4대의 피시가 있고 멀리떨어져있는 또 4개의 피시가 있는 같은 회사라고 하면 지금 동떨어져 있는 본사와 지역에 있는 지역사무실 이라고 말할 수 있다. 
걔들간에 통신을 할때 T-1 라인 하나를 할당해서 쓴다.
간단한 예를 보이는데
여기 스위치가 각각 있음
인풋이 4개니까 나가는데 4개
덩달아서 4개가 또 나가는 라인이 더있음 얘들은 다시금 돌아감
이 라인은 무슨 형태일까 ? 스위치가 4 BY 8 인풋이 4개인데 아웃풋은 8개
여 스위치는 이렇게 나가서 얘들과 통신하겠다는 얘긴데
다시 돌아오는 것은 얘들간에 통신을 이 스위치가 해줌
얘와 애가 통신하고 싶다면 이렇게 들어가서 어디로 나가야 되냐면 얘가 여기일땐 요 라인을 타고 나가줘야함
이렇게
그럼됨
그 패스는 여기서 만들어지고
내부 인트라 커뮤니케이션도 가능하고 인터 커뮤니케이션도 가능한 스위치 
T-1 라인이 하나 있는데 4개의 유저가 쓴다는 얘기는 T-1 라인 하나를 4 유저로, 4채널로 나눠서 씀 그러면 
T-1 라인 하나가 규격임 T-1 라인이라고 하면 얘는 1.543 Mbps 의 bit / rate을 갖는 트럼프 라인임 이건 규격임 t-1 라인이 1.543 Mbps 짜리 능력을 갖는 대역폭을 갖는 구리선임

4유저가 쓰면 이거 1/4 씩 채널을 나눠서 쓴다든지 t-1 라인이 애당초 어떻게 구성이 되냐면
전화 채널이  1부터 2해서 24 전화채널 + 한 bit 싱크를 맞추기 위한 프레임 비트 하나 해서 이게 각각이 8bit 그럼 어떻게 되냐
8bit , 24개 더하기 1bit 해서 193 bit 한프레임이 193 bit 짜리 
이런 프레임이 계속 이어지는데 이게
이게 초당 , 이프레임이 초당 8000 프레임이 이어진다. 8000 프레임이 sec당
193 bit 짜리 프레임이 8000개가 초당 지나가기 때문에 곱하기하면은 1.543 Mbps 가 나옴
이것을 만일 규격으로 우리가 항상 t-1 라인이 뭐다 라고 했을떄 이렇게 생각해야 되는거고
이 채널 하나하나가 이게 전화서비스 할때 전화 한통화 저 한채널을 이용함
전화 한통화가 이거 한채널을 이용함
한 채널
24개의 전화채널이 t-1 라인 하나에 24개의 전화 를 동시에 수용할 수 있는 라인임
t-1 라인이
지난 시간에 한거임
요 한비트가, 요 한 채널이 8비트라고 했음 8비트가 결국 이프레임 이 초당 8000 번 반복되니까 초당 그러면 한채널 입장에서는 8bit 초당 8000번이 허용됨 
8000번 순서가 돌아옴
64kbps 가나옴
예를들어서 전화 한통화는 허용된 64 kbps 우리 64kbps는 우리전화 서비스에 적정한 밴드위쓰냐? 맞다 이것이다. 
64kbps는 우리 전화서비스에 적정하다 어떤 근거에 의해서 나왔느냐
우리 음성은 4khz에 주파수 대역을 각 커버가 된다.
그러면 이 아날로그를 디지털화할떄 이 채널에 집어넣을려면 센트럴 하고 tcm 방식을 써야하는데 그떄 샘플을 몇번하느냐 ? 나이키스트 쎼우렘 에 의해서 이것에 2배를 한다고 했음
8000 번 샘플 한다고 했음 
한 샘플당 8bit 로 바꿔
틱 타이제이션 할때 한 샘플을 8, 256개 중에 어 느 하나에 맵핑시킴
전화 라인을 pcm 을 통해서 만들면 64kbps 나옴
정확히 t-1 라인이 제공하는 한 채널이 지원해줄 수 있는 스피드와 내가 지금 음성 데이터를 아날로그 디지털로 바꿀떄 나이키스트 쎼우렘을 이용해서 아날로그 가 음성데이터를 디지털화 할때의 최소한 필요한 밴드위쓰와 정확히 일치함
64kbps가 
사실 이렇게 숫자로 나오면 여기 ??? 한거니까 당연히
저 걸 수용하기 위해서 t-1이라는 규격이 만들어졌으니까 같은 숫자가 나와야함
한 채널이 이렇게 음성을 초당 8000번씩 내가 전화를 얘기할 때 이 음성을 초당 8000번씩 샘플 해서 계속 디지털 데이터를 만들어서 생성이되서 계속 이 채널에 넣어서 보냄
프레임 마다 하나씩 돌아오는 자기 채널에 계속 집어넣서 보내면
내가 생성해 내는 데이터 스피드하고 이 프레임에 넣어서 전송되는 스피드랑 같은거임
64kbps, 생성도 64kbps
전화 서비스가 아무런 지연없이 아주 스무스 하게 서킷 네트워크에서는 스무스하게 전화서비스 이루어질 수 있음 t-1이라는 규격이 전화서비스를 기반으로 나온거기 떄문에 저렇게 숫자가 정확히 일치한다. (또 복습하고 )

## 회선 교환에서 이루어지는 3단계
3단계임 커넥션을 설정하는 단계
그리고 설정한다음에 데이터를 보내고 그다음에 끊는단계 이 렇게 3단계로 나눔
1. 설정단계
2. 데이터전송단계
3. 해제단계

이 그림이 재밌는 그림인데 
단계를 보여줌
이 A에서 B까지 회선교환을 통해서 데이터를 주고받고자할때
A로부터 쭉 가는게 이 그 회선을 설정단계 가 이거임
중간 중간에 거쳐가는 이 스위치들이 이 얘의 요구를 수용할 수 있다. 그러면 그다음 스위치가 길을 뚫어 주고 그 다음 스위치가 수용할 수 있다고하면 뚫어주고 해서 수용할 수 있다 없다는 여기서 여기로 가는 체널이 
링크 속에 채널이 애한테 줄 채널이 여기에 있느냐 이걸 따진다. 채널이 있다. T-1 라인이 여기서 여기사이에 연결되있다 그러면
T-1 라인이 채널 24개가 있음 24개 하나가 비어있느냐 와서 비어있으면 커넥션 설정을 여기서 
통과져
여기서도 마지막 유저까지 채널이 있는지를 보고 설정을 함 저게 
실생활 하고 결부지어서 얘기를 하면
가령서울에 있는 사람이 지금 부산에 부산에 지역번호가 051에 이런 국번이 있는지 모르지만
370-5121 이다. 가령 
내가 이 부산에 있는 이 전화번호와 내 통화를 하고 싶다. 그러면 이 다이얼을 누름
저 과정이 어떻게 이루어지는 살펴봐주면 
서울에 있는 내 전화기 에서 들고 051을 누르는 순간 이 얘는 내 교환기가 어떻게 알아듣냐면 부산쪽으로 통화구나 하고 051 에 받은 교환기는 내 전화를 어디로 연결해주냐면
시외 교환기로 연결해줌 , 서울에서 시외로 나가는 콜들은 다 여기서 모아서 내보냄
서울 내부 에서 콜은 서울 내부에 있는 각 그 동 마다 교환기 들이 수용을 하는데 
시외로 나가는 콜은 혜화동에 있음 대학로에 있음 큰 전화국 이 있는데 시외 교환기가 있음 
구로 전화국 이 하나있고 이 두개가 이 서울에서 시외로 나가는 이 관문 교환기임
051을 딱 치면 이 시외 교환기가 쭉해서 부산에 있는 시외 교환기를 고거는 이 속에 채널이 있다 없다 이것을 봄
채널이 이속에 T-1 에 하나 있는게 아니라 어마어마한 라인이 있음 T-1 라인이 100개 이상 있다고 하자
그러면 24개 채널이 아니라 2400개 채널이 쭉 있다. 그중에 하나라도 하여튼 있느냐 이것을 내가 051을 딱 치는 순간 얘가 그것을 판단함
순식간임
051을 치면은 이 시외교환기가 이것을 체크해서 있더라 하면 여기로 감
여기 까지 통화로 가 연결되어있음 그다음에 내가 370 을 누르면 이 시외교환기는 부산에서 교환기잔아 부산에 뭐 370 국이 있는 동네가 있고 510 국이 있는 동네가 있고 900번이 있는 국이 있겠음 얘는 데이터베이스에 어느 동인가가 바로 이 요 다음 국번호자리를 보고 판단을 함 
370 이라는 동네에 있는 교환기를 봤을떄 이채널 있느냐 여기에
이것을 판단을함
채널이 있느냐 없느냐 
370 국에 해당하는 동네 교환기까지 가는 채널이 있느냐를 봄
내가 이 번호를 6개를 치는 사이에 얘들은 이미 이일들을 하고 있음
여기까지 와있음 370 국을 처리하는 전화국에 여러 가입자들이 5121 번호를 가지고 있는 가입자 전화가 있음 여기에 
여기에 순식간임 051 
계속 051 370 .. .연속으로 치져 그럼 주르륵 받아서 척척하고 마지막에 370 은 무슨일을 하냐면
요것을 받아온다.(아마도 5121을 받아온다 라고 생각하면될듯?)
이 통화가 뚫렸음 이사이에 5121 받아옴 5121을 받아와서 그러면 내 교환기에 수용된 가입자다 라고 5121 가입자에게 벨을 울려줌
이제 따르릉 소리가 여기에 들림
얘가 가령 통화중이다 그러면 여기서 이 신호가 저기 라인에 점유되어있는지 않되어있는지 확인을 하고 혹시 점유되어있다 통화중이다 라고 하면 여기서 이 교환기가 통화중 소음 을 만들어줌
통화중 소음을 만들어 내는 장치가 있음 그 소리를 쭈욱 나한테 들려줌
이 교환기가 만들어내줌
저쪽 최종 교환기가 여기서 통화중이다라는 소리를 만들어서 알려줌
얘가 지금 통화중이 아니다. ring back tone 이라고 함 이것을
내 귀에 들리는 또로록 또로록 하는 소리는 여기에 울리는 벨소리가 아니라 실제로는 얘가 만들어줌 얘가 지 금 가용 했다. 얘가 지금 통화중이 아니더라. 통화 ?? ?? 라고 하는것을 얘가 스스로 나한테 알려줌 

아까 ??? 보냈듯이 ring back tone을 만들어줌 그리고 동시에 얘한테 시그널을 보내서 이 전화기가 벨이 울리도록 함 
딱 받는 순간 이 그림에 의하면 지금 여기에 와있다. 즉 벨을 울리도록 신호를 보냄. 이게 
이 b라는 유저가 전화기를 받는 순간 들면은 거꾸로 쭉 옴 들었다 라고 하는 통화로 가 형성됬다 라는게 이거임 듣는 순간에 이론적으로 또 우리는 모르지만 교환기간에 메시지를 주고 받는다 이거임 이통화가 아까랑 가설정인데
이제는 완전히 설정이다 라는것을 그런 정보들을 교환기 간에 막 나눠주는것임

그럼 통화로가 그런 ack가 여기까지 오면 통화로가 드디어 완성이 된것임 여기서 여보세요 하기 바로전에 전화기를 딱 들때 여보세요 갈께 아니라 전화기를 수신자가 전화기를 들때 훅 오프 라고함 
전화기 눌리는 게 딱 띄어지는 순간에 이 시그널이 쭈욱 감 통화로 형성
그다음에 여보세요 라는 소리는 요 데이터 주고 받는 단계임 
여기는 full signal이 오갈것임 보다싶이 전화번호가 쭉 가고 여기서 받았다라고하는 그 리트리걸링 시그널 이 쭉 다시 돌아오기까지 셋업 단계임  	
여보세요 부터 시작해서 얘기를 주고 받은 다음에 누군가가 끊음 끊으면 일반적으로 끊는,
전화기를 한쪽에서 끊으면 끊어짐 이게 바로 
상호 확인하고 끊는게 아니라, 한쪽에서 끊어버리면 끊었다 라는 신호가 오면 그 통화로는 끊음
다른 쪽에서 끊어버리면 끝임
일방적으로 한쪽에서 끊는 과정이 있는데 이게 바로 끊는 과정

끊는 과정
이 전화통화를 보면 바로 이게 상대방이 훅오프할때까지 여기까지 말 대화를 나누고 끊고 
3단계로 하나의 통화가 형성이 됨 
여기서 이제 이 그림이 
앞으로 여러번 이런 그림 모양이 나오는데 아래쪽이 타임임 
아래쪽으로 갈수록 시간이 지나감 오른쪽이 아님 아래쪽으로 갈수록 지나감
뭔가 시간이 요 시간에 비해서 요시간 요시간은 아래쪽으로 더 내려감 
다시말해서 시간이 경과되었단 뜻임 바로 내가 이 전화번호를 각각 누르고 
이 전화번호 시그널이 교환기를 하나하나 거쳐갈때마다 약간약간 씩의 시간이 걸림 그래서 쭈욱 그렇지만 얘들은 중간에 처리하는 과정이 너무 단순하기 떄문에 그냥 물흐르듯이 쭈욱 흘러가고 
훅 오프 했던 시그널이 쭈욱 오는 식으로 해서 컨트롤 시그널이 오가는 것이고 보여주고 있는데 어쨋든 그렇게 커넥션이 설정되는 과정이 여기에서 시작되서 여기서 끝났져 
바로 이게 설정에 걸리는 시간임 이게 
코어 설정하는데 걸리는 시간임
상대방이 전화기를 들기까지 걸리는 시간임 
그게 설정(셋업타임)
그리고 데이터를 주고받는데 데이터도 역시 보낸 시점은 여긴데 경사가 기울어져서 여기까지 감 그러면 저 데이터를 이 시점에 보냈는데 가기는 이시점에 왔다 이 시간을 뭐라하냐면 지연이다. 

내가 지금 데이터를 100 kbit를 보냈다 라고 하면 100kbit 를 보내는데 걸리는 시간이 총 얼마나 걸리냐면 이시간임 
내가 보내는 시점이 여기고 100 kbit가 다 도달하기 까지 걸리는 시간이 여기니까 이 시간임
이 시간이 내가 100kbit를 보내는데 걸리는 시간임
두가지가 있음 이게 있고 이게 있음
각각이 뭐임 시간
지연인데
각각이 지연이 의미가 다름
이거는 무슨 지연? 이것은 무슨지연?
지연이라는건 4가지 중에 뭐져? 전송지연, 전파지연, 큐잉 지연 그리고 프로세싱 ( 처리지연) 그중에 어느것이냐?
이것? 
기울기에 해당하는 값이 이게 전파지연임
전파 프로퍼게이션 딜레이임
요 이 실제 큰 덩어리 100kbit 가 이 고속도로 타고 쭉 가서 첫 비트가 출발 여기까지 마지막 비트에 도착하기까지 걸리는 시간이 전송지연임, 트랜스미션 딜레이임

이게 매치가 되냐? 고속도로에서 톨게이트를 통과하는 시간이 트랜스미션딜레이라고 했고
일단 고속도로에 올라서면은 시속 100kbit로 쭈욱 달리는게 전파지연이라고 했음
바로 이 여기서 이 여기서부터 여기까지 걸리는 시간이 톨게이트에 올리는 시간임 한 비트에서부터 시작해서 10만 번째 비트를 이 라인에 내가 컴퓨터가 분류된 라인에 올려주기 까지 걸리는 시간이 톨게이트에 걸리는 시간임 톨게이트를 통과한 요놈이 고속도로를 쭈욱 달려가는 목적지까지 가는 걸리는 시간이 얘임 
고속도로 달리는 방식이 전파지연임
그래서 여기 이것은 전송지연 이고 이것은 첫번째 비트가 도달하기 까지 기울기 에게 만들어지는 시간이 전파지연임
이 그림을 보면은 이게 다 전파지연임 색깔이 없는 요놈들이 다 전파지연임
그렇다. 색깔이 없는
색깔이 있는 영역들이 전송지연임
그렇게 얘기를 할 수 있음
저 그림은 저게 서킷 스위치 네트워크임
이렇게 전화 번호 해석 하는 과정들로 스위치들에 통화로를 만들어가는 과정을 매칭 시켜다 보니까 이게 정말 속속 들어온다 실제로 이렇게 된다. 이 전화번호라는 구조가 이게 각각 이걸 처리하는 스위치가 계위가 다름 
시외교환기가고 이건 국번호 처리하는 교환기고 이것은 로컬 교환기가 처리하는 번호다 이거임 교환기를 두고 계위가 있다라는것임

거기까지 서킷 스위칭이고 결국 서킷 스위칭은 이게 전통적인 전화 네트워크가 서킷 스위칭을 통해서 만들어 지고 있다.
아까 애끼했듯이 이런 스위치들이 결국 이 채널에 있느냐 없느냐 판단을 하게 됨 그렇면 
이 얘기중에 그러면 이리로 가야되는데 채널이 아예 없더라 그러면 어떻게 되냐?
전화거는 사람에게 알려줘야하는데, 톤이 다름
통화중이다 라고 그게 아니라 가는 사이에 채널이 없어 연결을 할 수 없다 라는 신호를 보내줘야해 그 신호가 뭐냐? 그 신호를 들어 본적이 있느냐???

갈 채널이 없다 라는것은 나에게 뭔가를 알려줘야함 
갈 채널이 없다라는 메시지를 받아 본적이 없냐? 메시지를 하지 않고 톤을 보내줌
여기서 가령 채널이 없으면 내가 듣 는 소리들은 교환기가 만들어줌 다 
통화중음도 이 교환기가 만들어주고 링백톤도 얘한테 벨을 울리게 하는 링백톤도 얘가 주르륵 하는 소리를 만들어서 보내줌 
그중에 또다른 소리가 하나가 뭐가 있냐면 congestion tone이 있음 
이게 완전히 포화상태임 채널이 아마도.
여러분들이 전화기를 전화번호를 눌렀을 때 분명히 들어봤음
컨제스턴 톤.
통화중음은 뚜 뚜 뚜 뚜 
컨제스턴 톤은 뚜뚜뚜뚜ㄸ뚜뚜뚜 빠르게 나오는 소리가 있음
어떤 경우에 소리가 나오냐면 진짜 채널이 없을때 어떤 경우 채널이 없냐 이쪽지역에 큰 재난 이 발생해서 이 쪽 지역 사람들 한테 수도 없는 가족들이 여기저기서 전화를 하다보면 채널이 없어짐 그러면 이런날 전화를 해보면은 저소리를 들을 수 이음
굉장 히 빠른소리임
통화중 소리 보다 훨씬 빠른 소리로 뚜뚜뚜뚜 소리 컨제스턴 톤이라는 채널이 없다 라는 의미임

그래서 전화망이 그렇단 얘기고 패킷스위칭은 서킷 스위칭은 이렇게 
채널을 하나 누구에게 주고 나면 얘가 쓰든 안쓰든 그채널은 그사람이 점유한것임

내가 전화 한통화 얘기했음 전화 통화 하나채널을 완전 100% 할당해주는데 실제 전화상에 이 음성데이터가 오고 가는건 50% 쯤임
얘기를 전화하는거 굉장히 수다스러운 사람 뺴고 통화하는거보면 50% 쉬고있음
채널을 안쓰고 있음 너무 아까운것임
채널을 남들에게 on-demand 방식으로 주면 얼마나 좋을까?
그게 패킷 스위칭 개념임 좀 여러사람이 쓰게하자! 이거임
이 데이터통신에서는 더군다나 데이터통신에서는 더더욱 그렇게 해야하는게 데이터통신은 우리 전화통화보다도 오히려 더 채널을 간헐적으로 씀
데이터 생성이 간헐적이다 라는 말, 연속적이지 않고 채널 점유하는게 10% 정도 쓰다가 쭉 쉬었다가 또한 10% 쓰고 쉬고 이런거라면 채널을 100% 할당해주는건 넌센스가 됨
데이터 통신에서 그런 문제, 데이터통신이라는게 이라는게 활성화 되면서 서킷 스위칭은 너무 비효율적이다 라고 해서 데이터통신에서는 메시지는 패킷 스위치 네트워크라는 개념으로 되고
그 패킷을 아까 말한것처럼 메시지 스위칭은 한덩어리지만 
이제 어떤 고정되거나 또는 가변적이지만 어쨋든 너무 큰사이즈가 아닌 어떤 사이즈로 쪼개서 메시지를 쪼개서 패킷 스위치 네트워크 보낸다.
사이즈는 패킷의 사이즈는 네트워크가 결정해줌 가령 우리가 인터넷 이 이더넷이라고 하는 많이 쓰는 이더넷 
이더넷 이라고 하는 우리 넷 에서는 1500 byte로 한정되어있음. 메시지 사이즈가 1500 byte 넘으면 안됨 네트워크 별로 사이즈가 결정이 됨 
또는 프로토콜이 그 사이즈를 결정하고 어쨋든 메시지 사이즈가 맘대로 쓸 수 있는게 아니라 어떤 룰에 의해서 결정이 된다. 패킷 스위치 네트워크에서는
그리고 패킷 스위치 네트워크에서는 아까와 같이 그채널을 채널을 고정적으로 할당하는게없다. 라는것임

다시말해서 패킷 스위치 네트워크에서는 컨제스션 톤이 없음. 즉 여기 컨제스션 톤이 왜 발생했냐면 이 소스를 얘한테 줄려고 하는데 채널하나 줄려고 하는데 없을때 나옴 그런데 패킷 스위치 네트워크에서는 리소스 리저베이션 자체가 없음. 얘한테 할당 할당해주는 대역폭이 그런 약속이 없음 따라서 컨제스턴 톤이라는게없음 

리소스는 언제 주느냐? 그때그때 가용할떄준다. 필요할때
요구가 되면은 그때 가용하자 가용한 만큼 준다.
데이터 네트워크는 가령 이 유저가 이 유저에게 4개를 보냈는데 패킷을 
사이즈가 한덩어리가 커서 4개로 쪼개서 보냈는데 이 4개가 서로 다 다른 길을 통해서 갈 수 가 있다는 상황을 보여줌
어느 한길로 이 가야되는 패스가 설정 단계가 아니라 없는것임.
먼저 이그림을 보자. 지연을 얘기할떄

## 이그림이 데이터그램 네트워크를 말하는건지는 잘 모르겠네.
중요한 그림인데
이 그림 
이런건 패킷, 패킷이 네트워크에서 데이터당 하나가고 기다렸다가 이만큼 기다렸다가 그다음 스위치로 길이 뚫리면 가고 기다렸다 가고 이거임
여기 아까 초록색으로 커넥션 설정 끊는 과정이 없음 
이게 패킷 스위치 네트워크 중에서도 데이터 그램 방식에 저거임
커넥션 설정 단계가 없음 그냥 데이터를 쭈르륵 보냄
이건 조금 잇다가 살펴보고

그러니까 커넥션 설정단계가 없단 얘기는 어떤 하나의 길이 할당되지 않음 그래서 각각의 스위치는 이 패킷별로 다 목적지가 다 x다 라고 하는 목적지 주소가 다 들어있어야함 일일히 패킷마다

받아보곤 x한테 갈려면 어느쪽으로 갈려하는데 보니까 지금 가장 빨리 갈 수 있는길이 얘가 판단하기에 1번이 왔을때 이리로 가는 이리로 보냈는데
어 상황이 바껴서 이게 더 빠르다 이러면 2번은 이리로 보내고 
3번은 이리로 보내고 4번은 이리로 보내고 이게 네트워크 상황에 따라서 라우터가 열심히 
그 일을 함 
일을 해서 가장 효율적으로 갈 수 있는 길을 찾아줌
라우터가 하는 일이 하는 일이 많음
이 라우팅 프로토콜 : 라우팅 알고리즘임
라우팅 알고리즘은 나중에 네트워크 레이어 에서 보면 알겠지만 여기서 여기까지 가는데 가장 그 링크개수를 적게 거쳐서 간다. 라든지 아니면 현재 네트워크를 봤을때 트래픽이 가장 적은 쪽으로 통해서 보내면 딜레이가 적어진다. 그런 길을 판단해서 보낸다든지 나름대로 판단하는 로직이 있음
그게 바로 라우팅 알고리즘이라고 함. 
요 스위치들이 갖고 있는 라우팅 알고리즘
라우팅 알고리즘에 의해서 어느 목적지를 가기위한 길이 그때그때마다 다르게 만들어줄 수 있음 
라우팅 알고리즘에 의해서 
패킷 네트워크에 의해서는 저렇게 원래 한덩어리 
같은 소스로부터 받는 목적지까지 가는데도 길이 여러갈래로 나눠진다. 갈수도 있다 라는것이다.

우리가 실제 내가 이 패킷을 여기서 여기로 보내는데 정말 길이 여러개로 가느냐를 우리가 살펴볼 수 있다. 살펴볼 수 있는 프로그램이 있음.
어, 어플리케이션 레이어 를 배울때 나오는 프로그램이 뭐냐면
트레이스 라우터 라고 하는 트레이스 라우트 하는 프로그램이 있음.
뭐냐? 루트를 추적한다 이거임
트레이스 라우트 루트를 추적하는 프로그램인데 저걸 치고 내가 목적 지 주소를 치면 
목적지 주소, IP 어드레스 가된다. 뭐든 URL 주면되고 트레이스 라우터에
얘가 하는일이 뭐냐?
이 목적지 까지 패킷을 보내고 거기서 응답이 오기까지 걸리는 시간을 보여주고 거쳐간 라우터가 누구누구 있고 여기 쭉 디스플레이됨
이일을 수행하면 여기에 1번 라우터는 누구, 2번 라우터는 누구 쭉해서 10번 라우터 누구해서 
10개라우터 거쳐서 결국 이 목적지를 가더라 이런 토탈 데이터를	쭉 디스플레이 해주는 아주 유용한 프로그램 이있음 트레이서 라우터라고하는
여기에 가령, 대학 URL 주소를 치고 이걸 이용해서 해보고 싶다.
몇개 라우터 를 거쳐가는지 보고 싶으면 저걸 쳐보면 된다.
근데 이게 왜 나왔다 하면 패스가 달라진다하면 이 한번 거쳐간다고 10개 라우터 리스트를 쭉 줬는데 그다음에 또 해보면은 또 다른 라우터들이 나올 수 있다 .이것임

항상 1번 부터 10번 까지 얘가 ??? 같은 목적지 에 대한 트레이스 라우터를 수행했을때 같은 라우터들이 계속 나오느냐? 아닐 수 가 있음
지금 그 상황상황 별로 지금 목적지 까지 가는데 최적의 라우터는 얘들이 아니라 또다른 SET이 나왔으면 다음 번에는 트레이스 라우터를 했으면 다른 라우터 셋들이 쭈욱 나온다.
이게 바로 패킷 스위치 네트워크 이기 때문에 가능함.

여기서 중요한 얘기는 "커넥션 리스 네트워크라고 불름" 커넥션이 없는 네트워크임
패킷 스위치 네트워크는 커넥션 개념이 없음.
소스 목적지 까지 연결이 되어있는 커넥션이 없음 그냥 그때그떄 필요한 가용할 링크를 통해서 데이터를 전달한다.

## 데이터그램 네트워크
그럼 과연 어떻게 보낼까? 당연히 이 스위치에는 이 패킷들이 목적지 주소를 갖고 있다고 했는데 목적지 주소를 보고는 어디로 보내야 될지를 얘가 판단한다. 라우터 알고리즘이 
판단해서 나온 표가 이런것임. 이 표가 당연히 있어야함
목적지는 몇번 포트로 가고, 4150목적지는 2번 포트로 가고 ..이런식에 포워딩 테이블이 있음.
이미 라우터얘기할 떄 저 표얘기는 하겠다.
저 라우팅 테이블은 누가 만들었나? 라우터들이 열심히 우리는 가만 히 있어도 라우터끼리 정보를 주고 받음 나는 누구한테 갈 수 있는 패스가 있다. 누구는 알고 있다 
그게 바로 라우팅 프로토콜임 . 라우터 들이 서로 정보를 주고 받는 프로토콜 그걸 통해서 라우터들이 계속 주기적으로 데이터 를 주고받으면서 이 테이블을 업데이트함
네트워크 상황이 바뀌면 또 바꾸고 바꿔놓고 
계속 이거는 계속 살아있음, 계속 업데이트 해나감
그 라우터들이 계속 하는거임 아무 상관없이

## 메모
데이터 간에 주소는 패킷에 실려가는 목적지 주소는 목적지 갈때까지 바뀌면 안됨 계속 이 패킷들이 주소 목적지 주소 X를 갖고 있어야 하는데 
1,2,3,4 다 갖고 있어야함 목적지 주소가 여기서 갈때도 쓰이고 여기로 쓰이고 하니까 목적지 주소값은 변하지 말아야 한다.
라는게 여기 그 두번째 센텐스임 
패킷의 전체 여행경로를 통해서 이 목적지 주소는 동일하게 유지되어야 한다.
지난 초기에 계속 패킷이 가는데 계속 바뀌는 주소개념이 하나 있음.
계속 바껴야하는 목적지 주소는 절대 바뀌면안되는데 링크 하나 갈때마다 계속 바껴야 되는 주소가 뭐냐면 바로 이 네트워크 레이어 있는 주소는 IP주소로서 목적지주소 이거는 변함이 없는데 그 아래 레이어 데이터링크 레이어 내려오면 맥주소 라는게 맥주소는 계속 바뀌는 것을 어서 얘기하냐면 9장 가면 말함.
9장 이 데이터링크 여기까지 8장까지가 Physical layer고 9장 부터 데이터 링크 레이어인데 데이터 링크에 대한 전반적인 챕터가 다음 장임. 
근데 9장 얘기를 1장 할때 addr 개념이 4가지가 있다 라고 얘기할때 이미 9장의 슬라이드를 갖고 와서 보여준적 있음
라우터 하나 거쳐갈때마다 계속 arp라고 하는 프로토콜 통해서 다음 링크를 찾고 다음 링크 찾고 할때마다 이 새로 찾아야 하는 mac주소라는것은 이 패킷속에 또 들어있는 정보인데 데이터링크 계층이 만든 헤더속에 들어있으니까 패킷속에 있는 정보임 이정보를 계속 바껴야함 
링크 하나 갈때마다 
반면에 네트워크 레이어에 갖고 있는 목적지 주소는 변함없이 유지되어야하는것을 요 9장에서 표현함
이 그림 알아봄

## 데이터그램 네트워크 그림 다시또!
이그림 
데이터그램 네트워크에서는 이와 같이 call set up 지연 이런거 없음
초록색 아까 얘기했던거 그런거 없고 그냥 무조건 보내고 
큐가 이 기다리고 있으면 waiting time 가고 
토탈 지연을 보면 요 파란색이게 전송지연임
각 스위치들이 스토어 앤 포워드 할떄 다시 이 링크에 실어올려야 하기 떄문에 실어올리는 시간들이 있고 
다시 여기서 여기까지 가는데 걸리는 시간이 기울기가 만들어지는 프로퍼게이션 딜레이가 있고
그래서 전송지연이 3개가 있음
프로퍼게이션 딜레이 여기 하나 여기 하나 여기 하나 세개씩 있음
그리고 waiting time이 
여기서 waiting time 2번
그래서 토탈 딜레이가 여기서 여기까지 저렇게 구성되어있음
셋업 딜레이 + 터미네이션 딜레이 이런거 없음
여기서는

## 메모
이 스위칭을 보통 요즘에 중요한 얘기
스위칭이 어디 레이어 에서 이루어지느냐 질문을 한다.
지금 이 라우터들이 스위칭 데이터가 들어왔을때 이리로 보낼까 이리로 보낼까 결정하는것임 
목적지 주소를 보고 그럼 얘가 어느 레이어에서 스위칭이 이루어졌다고 말하냐면 네트워크 레이어에서 스위칭이 이루어졌다 라고 할 수 있음 왜?
내가 스위칭을 할때 내가 참고할 자료가 목적지 주소임
근데 목적지 주소는 네트워크 레이어에 있음 
목적지 주소는 데이터 링크레이어에 대한 것을 보면
데이터 링크 레이어 헤더 속에는 목적지 주소가 없음
데이터 링크 레이어 는 아까 말했듯이, 얘가 이리로 가면은 얘의 mac주소가 들어있음
이 데이터 링크 레이어에서는 
네트워크 레이어 에 올라가야 네트워크 레이어 가 만드는 헤더속에는 이 목적지 주소가 들어있음 
얘는 목적지 주소를 보고 이리로 갈까를 결정한다. 
바로 네트워크 레이어 에서의 스위칭이 이루어졌다 라고 본다.
스위칭이 데이터링크레이어에서 이루어질수있고 네트워크 레이어에서 이루어질수있고 트랜스포트 계층에서도 이루어진다. 
스위칭이 어느레이어 에서 이루어지느냐? 
L3 스위칭, L4 스위칭 이런얘기들이 나온다. 그 의미하는바가 레이어4에서 이루어지느냐 레이어3에서 스위칭이 이루어지느냐 이것임 레이어2 L2 스위치.
L3 스위칭 이런 얘기들이 나오기 떄문에 하는건데
이건 L3 스위칭 얘기임 목적지 주소가 네트워크 레이어 에 있기 때문에 레이어 3 스위칭이라고 말할 수 있음.

여기에
데이터 그램 네트워크에서는 네트워크 레이어에서 패킷 스위칭이 이루어진다.

여기까지가 데이터그램 네트워크이고

패킹 스위칭 네트워크가 두가지가 있는데 데이터그램 네트워크 를 본것임 지금
두가지인데 데이터그램 네트워크를 살펴봄 또다른 방식인 버츄얼 서킷 네트워크
역시 패킷 스위칭 네트워크 에서의 또다른 전송방식임

패킷 스위칭인데도 불구하고 서킷 스위칭 쪽에서 갖고 있는 강점을 갖다쓰자 라고 해서 버츄얼 서킷 네트워크 라고 함
그러면 얘는 과연 패킷 스위치 네트워크는 콜 셋업 과정도 없고 그랬는데
벌츄얼 서킷 네트워크는 콜 처리되는 과정을 살펴보면 먼저 쭉 넘어가서 이런 그림이 나옴 
## Virtual-circuit network.
그림을 먼저보면은 
이런 그림이 나옴 
마치 아까 서킷 스위칭 에서의 딜레이 거의 똑같음
거의 똑같음 콜셋업도 있고 트랜스미션도 있음 
이 그림 3개 비교한게 굉장히 중요함
딜레이 구성요소 보여주는게
다음 여기서 지금 아까 서킷 스위칭에 비해서 다른게 뭐가 있냐?
패킷을 나 혼자 보낸다.? 그게 지금
딜레이 측면에서 지금 아까 서킷 스위칭 그림에 비해서 달라진점은?
뭐가 달라졋지? 이게 데이터가 아까는 한절로 주욱 갔는데
지금은 한줄로 못감 왜냐하면 콜 셋업 과정도 있고 해서 이 과정이 있단 얘기는 패스 하나로 결정된다 얘기임 데이터 패킷 네트워크인데도 불구하고 패킷 마다 다 다른길을 가는게 아니라 하나의 통하는 한 길을 통해서 가기 위한 패스를 설정하는 과정이 패킷 네트워크인데도 버츄얼 서킷 네트워크에서는 있음.
아까 전화번호 갖고 콜 만들어갔듯이 여기서도 똑같은 일을함 목적지 주소를 갖고 똑같이 일을 한다음에 그 패스가 지금 설정됬음 이 스위치 거치고 이 스위치 거쳐가는게 결정이 됬음.
그럼 데이터 를 보내는 서킷 스위칭은 이 콜 셋업은 과정은 채널이 하나하나 할당 되었기 때문에 큰 파이프가 이 뻥 뚫린 거랑 다름이 없었는데 서킷 스위칭은 
그게 곧 리소스 리저베이션임 근데 버츄얼 서킷은 리소스 리저베이션은 없음
요 부분을 거쳐간다라는 패스는 딱 정해졌는데 그 패스에 있는 채널을 주는게 아님 미리 예약을 해주는게 아님 일단 길만 설정하고 그 길로 보내면 보낸 다음에 요 드디어 뭐가 왔져!? 그럼 온 디멘드 방식으로 리소스를 줌 온다음에 받은 다음에 채널을 주고 
받은 다음에 채널을 주고 
여기서는 적어도 콜 셋업 과정을 통해서 요 부분에 딜레이 가 발생할 수 있었음. 큐잉 딜레이
내가 지금 들어왔는데 나갈길이 없으면은 앞에 먼저 도착한 패킷 부터 보내고 보내는데 내가 들어가는데 콜 셋업 과정을 거쳤기 때문에 어느 적정한 선에서는 오버 부킹을 하는데 
적절한 선에서만 함 
아까 데이터 네트워크 같이 무작정 보내고 waiting 하고 무작정 보내고 waiting 하는게 아니라 거의 리소스는 필요할때 는 줄만큼 충분히 가지고 있음 그래서 오자마자 다 받은다음에 스토어엔 포워드 방식으로 패킷 스위칭 개념 
데이터를 다 받은다음에 출력으로 보내주고 다 받은다음에 출력으로 보내주고 
해서 아까 같이 이 서킷 스위치드 네트워크는 한줄로 쭉 갔는데 이렇게 가능했는데 
이건 완전 파이프가 열려있음 이속에 리소스 리저베이션이 된거임 
얘는 그게 아니기 때문에 쭈욱 가고 왔구나 하고 온 디멘드 방식 다받은 다음에 그래 그러면 여기 내보내고 막 이렇게감
지연 없이 
여기 틈이 생기면 지연인데 지연 없이 이렇게 감 요 부분이 차이가 있음
이게 여전히 패킷 스위칭 네트워크인데 무슨 상태로 있느냐? 요 waiting time이 없어졌음 이 waiting time 이 우리가 네트워크를 사용할때 가장 우리를 괴롭히는게 waiting time 임
다른 트래픽들이 많이 쓰고있으면 내가 거기에 영향을 받음 그런거 없이 waiting time이 없어졌음 서킷 스위치드 네트워크 장점을 가지고 옴 
패킷 스위치드 네트워크이면서 서킷 스위칭 의 장점을 가지고 왔다.
그러면 가상 회선 교환기능은 결국 콜 셋업 과정으로 있어야 하고 가상회선 네트워킹은 아까 전화번호 콜 셋업 과정 얘기했듯이 
이 가상회선 네트워크에서는 콜 셋업 과정 을 설명해야 한다(중요) 콜 셋업 과정을 뒤에 설명하는 그림들이 쭉 있음 이 그림들이 콜 셋업 과정을 설명함
이 그림들이 설명할려면 시간이 좀 소요됨

## 가상 회선 네트워크
가상 회선 네트워크라는 거에 대한 큰 그림은 설명을 했음
회선교환처럼 설정 해제 단계가 있고 
회선 교환 처럼 자원이 미리 예약 될 수 있지만 대게는 필요에 따라 패킷이 오면 그떄 자원을 줌 패킷이 오면 주고 이런식으로 
온 디멘드 방식으로 자원을 주고 있고
데이터그램 네트워크처럼 데이터를 패킷으로 전송
그리고 각 패킷은 헤더의 주소를 가지고 있음 여전히 이것은 패킷 스위치 네트워크개념을 똑같이 가지고 있음
회선 교환처럼 연결이 설정되고 나면 패킷은 이제는 같은 경로를 통해서 가는게 버츄얼 서킷 개념에 특징임
같은 패스에 같은 경로를 통해서 감
(개념 중요)
가상 회선 네트워크는 데이터링크 층에서 구현된다. 이게 아까 얘기한 스위칭이 어느 레이어 에서 이루어지느냐? 
아까 데이터 네트워크는 L3 스위칭 이라고 했음 목적지 주소를 보고 그떄그떄 이 어디로 갈까 를 결정한다 이거임 스위칭
근데 가상회선 네트워크는 l2 스위치임 레이어 2 스위치임
데이터링크 층에서 스위칭이 일어남 
다시 말해서 무슨 패킷이 하나 왔는데 이리로 보낼까 이리로 보낼까 어디로 보낼까를 결정하는 데 사용하는 정보가 어느 레이어에 있느냐면 네트워크레이어 에 있는게 아니라 데이터링크레이어에있는 정보를 이용해서 보낸다.
그얘기는 데이터링크 계층에 있단 얘기는 이게 목적지 주소가 아니라는것임
목적지 주소는 네트워크 레이어에 있음 
데이터 링크 계층에는 목적지 주소가 없음
데이터링크계층에서 스위칭이 이루어진다는 얘기는 어디로 보낼까 목적지 주소를 보고 가는게 아니라 어떤 또다른 주소를 보고 이것을 결정함
그게 

## 가상 회선 네트워크
VCI
그게 VCI 라고 하는 개념임
버츄얼 서킷 아이덴티파이어.
뒤에 이제 그래서 저 VCI 가 라는게 새로 도입이 되는데 저 개념이 이 가상회선 네트워크에서는 어떻게 활용되는지를 설명할려면 바로 이제 이 가상회선의 주소가 여기나온다.
가상회선 식별자 (VCI )라고하는게 있음 목적지 주소가 처음에 쓰이지만 그다음에 패킷 하나하나 올떄는 가상 회선 식별자라는것을 이용해서 보낸다. 이것임
저게 무엇을 의미하고 그게 어떻게 활용되는지는 다음시간임
