---
post : layout
title : 시스템프로그래밍(기)6
---
## 네트워크 프로그래밍
네트워크 시간에도 간략하게 쓰는 방법만 중심으로 해서 강의를 함
이제 요새는 네트워크 도 무지하게 
휴대폰에 쓰는거 lte 도있고
그다음에 5g가 상용화 될것이고 자동차 속에서도
오디오 영화
...
그다음에 네트워크 종류에서도 드론 띄울땐 ?? 프로토콜을 쓰기도 하고
네트워크 종류는 많지만 
제일 기본적으로 서버에서 쓰는거는 tcp나 udp 임
그래서 일단은 tcp 나 udp에 대해서 강의를함

그래서 네트워크는 많이 들어보겠지만
통신을 하기위 해서는 프로토콜이 필요함
포로토콜이라는거는 이것을 적당한 우리말이 없음
그러니까 친구 집에 전화를 걸어도 누구 있어요 그런게 아니라 저는 누군데요 어머님 이십니까 잘계셨습니까 인사를 하는 프로토콜있잔아 그래서 네트워크 하는것도 상대방이 있기때문에 항상 절차가 맞아 떨어져야지 서로간에 어그리하고 송신할 수 있음

네트워크 커뮤니케이션 하기 위해서는 프로토콜이 존재하는데 
무선으로 보내거나 유선으로 보내거나 보내는 내용이 손실이 된다거나 중간에 중개하는놈이 죽어버린다던가 번개가 친다던가 그런 잡음이 나온다든가 보내는 내용이 없어지거나 변조가 되서 가는경우가 많이 있는데 그렇게 에러가 오류가 발생하는 상황에서도 끊김없이 대화가 성립되도록 만들어지는게 프로토콜임 그래서 굉장히 복잡함
에러가 포함된 데이터 링크를 사용하면서도 완벽하게 통신을 해야한다. 프로토콜의 목적
프로토콜은 하드웨어도 포함되고 소프트웨어도 포함이 되는데
이런걸 하기위해서는 굉장히 커다란 소프트웨어가 필요함 프로토콜이 사이즈가 적은게 아니고 무지하게 크기 때문에 이걸 가져다 한계층으로 만들지를 못하고 보통 표준이 7계층의 소프트웨어로 만들어지는게 프로토콜임 
프로토콜은 멀티 레이어 아키텍쳐 여러 계층에서 소프트웨어로 구성이 되는데 너무 큼
그다음에 이런거임 만일에 a라는 회사하고 b라는 회사가 무슨 계약을 한다고 가정을 하면 이번에 북미 회담도 마찬가지임
정상들이 얘기하기전에 밑에 똘마니 들이 먼저 막 얘기를 하잔아요
사장님 끼리 얘기하는거 는 대체적으로 요약된 얘기를 함 그렇지만 요약된거 에서 대체적으로 합의를 보면 밑에서는 전무는 전무끼리 또 얘기를 해야하고 전무가 또 시키면 부장은 부장끼리 또 얘기를 해야하고 그렇게 디테일 한 레벨이 달라지잔아 
그게 뭐가 다른거냐면 레벨 업  abstraction이 각각 다르다.

사장님은 전체적인 얘기를할거고 전무끼리는 조금더 자세한 얘기 상무는 그것보다 더 자세한 얘기를 함 그렇기 떄문에 각 레벨이 다르기떄문에 여러계층으로 프로토콜을 만들 수밖에없다. 
그다음에 각 계층이 제공하는 서비스도 따라서 다 다르다. 거기에다가 또 뭐냐면 어떤 경우에는 유선으로 보내는데 이더넷은 코엑셜 케이블로 보냄 
코엑셜 케이블이라는 전선을 통해서 보내는데 이게 뭐 와이파이라든가 무선으로 보는거고 lte는 무선으로 보내는데 ip를 써서 네트워킹을 써서 하는게 lte고 그래서 통신하는 방법이라든가 통신 그 데이터를 전달하는 area가 유선이냐 무선이냐 코엑셜 케이블 이냐 시리얼 케이블이냐 이런것에 따라 또 달라지기 떄문에

그런것들을 통과해서 가야되니까 이것을 여러계층으로 만들수밖에 없다.
프로토콜은 굉장히 크고 크면서도 똑똑한 에러가 생겨도 그걸다 카바 할 수있는 또는 행 오벌 할 수 있는 그런 식으로 만들어야 하기떄문에 프로토콜은 무지하게 큰걸 필요로 한다.

여러분들이 흔히쓰는 tcp 같은 소프트웨어는 계층은 무지하게 똑똑한 계층임
그래서 이 네트워크각 크기 떄문에 osi reference 모델이라든게  
시스템끼리 개방된 시스템끼리 연결한다 라는 뜻이됨
여기서 osi reference 라는 모델이라는 표준을 만들었음
이게 뭐냐면 이제 네트워크 프로토콜을 만들려면 7개 계층으로 만들어라
그랬으면 좋겠다 일종에 표준인데

불행하게도 표준이 있지만 우리가 옛날서 부터 써왔던것은 tcp / ip을 썻잔아요
tcp / ip는 못버리고 있어서 tcp / ip는 이 표준하고는 약간씩 틀린게 있음 
계층의 정의가 얼추 맞아떨어진다라고 보기때문에항상
프로토콜이 수십가지 수백가지 되는데 그것을 가져다 그 각프로토콜이 계층을 설명할때 이 osi에 새로운 레이어에 빗대어서 설명을 하게된다. 
예를들어서 내가 새로운 프로토콜을 만들었는데 이게 5층으로 만들어졌다 그러면 이게 osi 표준에는 어느 레이어 해당되는지를 설명하는게 보통이다. 그래서 우리가 이제 7 layer 을 하나씩 보게 될텐데 이게 제일 밑바닥 서부터 한다.

## Network Protocols for Communications
사장님이 아니라 제일먼저 실무자 부터 사용하는게 그게 피지컬 레이어다. 피지컬 레이어는 일반적으로 이제 하드웨어로 만드는, 일반적으로 하드웨어에 해당되는건데 이게 어떤 전기적인 시그널링 시스템 
1 가져다 몇볼트로 보내고 0는 몇 볼트로 보내냐? 이런거를 디파인 해야지 서로 주고 받을 수 있잔아 그래서 그런 전기적인 신호를 어떻게 보내고 받는 냐 에관한 표준을 가져다 디파인 하는것이 피지컬 레이어가 되겠다 그래서 유선도 있고 여러가지 무선 통신도 있다.

그러니까 유에스비를 꼽으면은 그러면 거기에 핀들이 있잔아 그거에 위치라든가 뭐가 이게 주고 받는다라는것을 피지컬 레이어에 디파인이 되어있다 라는것이다.

피지컬 레이어는 통신 미디어 가 뭐냐에 따라서 달라짐
내가 이더넷을 쓰는거냐 아니면 유선 네트워크를 쓰는거냐 아니면 자동차속에 캔을 쓰는거냐 이런거에 따라서 피지컬 레이어가 다 달라진다.

근데 피지컬 레이어를 통해서 이거는 물리적인 장치니까 저쪽 에서 저쪽 옆에 있는 컴퓨터에서 전기적인 신호가 왔으면 그쪽에 피지컬 레이어 에서 내 피지컬 레이어한테 보내는거임 내 피지컬 레이어 가 1 0 를 받았다 그러면 그 받았으면 그것을 누구한테 전달을 하냐면 그 위에 있는 데이터 링크 레이어 에게 전달을 한다 

데이터 링크 레이어는 에러 커뮤니 케이션 비투윈 
error free communications between adjacent nodes 
이게 무슨말이냐면 우리가 네트워크 통신을 해가지고 저기 무슨 아프리카에 있는 어느 컴퓨터하고 통신을 한다고 하면 아프리카에 있는 통신하고 내가 직접 포인트 투 포인트 로 연결 되있는게 아님 그러니까 컴퓨터나 중개소를 거쳐서 가야되기 떄문에 좌우지간 여러개의 컴퓨터 를 통해서 결국은 중개하는것도 컴퓨터니까 중개 중개 통해서 갈수밖에 없음

멀리까지 갈려고하면 내 붙은 놈에게 제대로 보내야됨 바로 그거를 
바로 옆에 붙은 컴퓨터 옆에 붙은 중개장치 보통 중개 장치를 영어로 뭐라 하나?
라우터 라고함 라우터를 하고 라우터를 통해서 전화국 까지도 갈 수도 있고 통신회사도 갈 수도있고 암튼 그게 다 중개 장치인데 
그건 컴퓨터라고 생각하면됨 그거에다가 바로 옆에 붙은놈한테는 일단 제대로 보내야지 그다음에 뭔가 일이 일어날거 아니냐 

그래서 바로 옆에 붙은 노드한테 완벽하게 보내는것을 보내는 역할을 하는것이 데이터 링크 레이어이다.

데이터 링크 레이어의 형태는 두가지 있다. 무선일경우 
미디어 억세스 컨트롤 이라는것이있다. 맥 레이어를 쓰는놈이있고 
그다음에 포인트 투 포인트 라고 쓰는놈이 있는데 포인트 투 포인트 는 내가 3명한테 붙어있으면 3명하고 다 연결이 되어있어야함 포인트 투 포인트로 그런 것을 쓰는게 있고 

mac 레이어라는건 미디어 엑세스 컨트롤 이라는건 멀티 플 쉐어드 엑세스 투어 인풋 또는 버스 라는걸 제일 많이씀 (multiple shared accesses to a link/bus)
버스 라는건 뭐야 
버스라는건 이렇게 여러개가 붙어있는걸 말함
여러개의 노드가 이렇게 버스라는걸 통해서 붙어있는것이고 포인트 투 포인트는 어떻게 붙어있는거냐? 이런식으로 붙어있음
그러니까 버스를 통해서 보면 이렇게 보낼것이고 그러면 버스에 붙어있는 놈한테 다 전달이 되겠죠(일자로 해서 쉐어드 방식 인걸로 기억함)
그중에서 받을 놈이 받아라 그런뜻이 되겠다

그래서 여기 버스 는 다른말로 multi point 라고 함
이거는 포인트 투 포인트 니까 이거는 멀티 드랍이 됬단 얘기임 여러군데 떨어졌다고 해서 멀티 포인트 , 버스 라고함
암튼 이게 
어떤 커뮤니케이션 미디어를 가져다 여러개가 쉐어하는 경우에는 뭐가 필요하냐 mac 레이어가 미디엄 엑세스 컨트롤 레이어가 필요함
특히 우리가 쓰는 이더넷 경우에는ㅇ ㅣ렇게 되어있음

이더넷 경우에는 버스 구조를 가지고 있어서 여러분 pc에서 뭘 쏘면 그게 케이블 을 타고 케이블 에 pc한테 전부다 전달이 된다. 이런 말이된다.

이더넷의 가장 큰 문제가 버스같은 거는 무슨 문제가 되냐면 내가 여기다가 쏠때 내가 쏘는지 안쏘는지 모름 그래서 얘도 쏠수가 있음 그런 신호가 서로 충돌이 됨 그게 잼이 된다 라고 하는데 잼이 되면 신호가 망가짐
그래서 이더넷은 보내고 나서 듣고있음 이게 망가지는지 안망가지는지 듣고있다가 이게 망가질거 같으면 어떻게? 다시 보내야함 다시 보내는데 요놈이 보내다가 부딪혔는데 두놈이 다시 또 보내면 또 충돌이 발생 그래서 여러가지 방법이 있는데 그건 네트워크 시간에 배우도록 하고 

예컨데 한가지 방법은 랜덤 넘버를 제널 에이트해서 얘는 1초가 나오고 재는 3초가 나오면 1초가 지난다음에 보내고 얘는 3초가 지난다음에 보내면 충돌 날 확률이 적어짐 그런식으로 해서 보내느게 mac 레이어다. 이더넷의 경우는 실시간 통신 쓰기에는 좋지 않다. 내가 보낸다 그래서 잼이 안된다 라는 보장이 없기 떄문에 자동차 경우에는 브레이크 밞는 신호를 보냈는데 그게 재밍이 되면 늦을 수가 있음 자동차에서는 이런것을 못씀 이런이유로 그래서 캔이라든가 클럭??세일이라는것을 쓰는데 어찌됫건 그게 데이터링크 레이어 이다.
데이터 링크 레이어는 여러가지 기능이 있지만 중요 한건 바로 자기한테 인접한 노드한테 일단 보낸다. 
자 그래서 내가 저쪽 끝에 있는 컴퓨터 한테 보냈는데 보내기 위해서 옆에 통신장치한테 보냈다고 치자. 옆에 있는것도 사실 라우터 인데 라우터도 컴퓨터니까 얘가 받았어.
내가 보낸 패킷을 잘받았어 그러면 이 컴퓨터 , 라우터는 뭘 결정해? 이 패킷을 까보니까 이게 아프리카 에 있는 컴퓨터로 가는거다 이거임 그런데 자기한테 붙은 노드가 또 3개가 있다 가정하자 그러면 이것을 아프리카 까지 갈려면 a,b,c 가 나한테 붙어있는데 a 한테 보낼건가 b한테 보낼건가 c한테 보낼건가를 결정해야함 그렇다. 어떤게 가까운지 결정을 해야함

그것을 뭐라하냐면 그거를 가는 골목을 지정 그것을 경로배정이라고 함 
경로배정을 영어로 우리로 어디로 갈때 루트가 어디로 간다라고 하잔아 그걸 라우팅이라고 한다.
원래 발음으로 그래서 그걸 하는것이 네트워크 레이어 계층이다.
그러니까 데이터 링크 레이어에서 인접한 노드가 잘받았음 데이터 링크를 통해서 그러면 얘는 뭘결정하냐 ? 이게 아프리카 까지 갈려고하면 나한테 한국에 붙어있는 라우터가 3갠데 어느 라우터한테 보내는게 제일 좋은건지를 결정하는게 경로배정 이라고하고 영어로 라우팅이라하고 
그런 역할을 하는게 네트워크 레이어다 이것이다.


그래서 네트워크 레이어는 가장 중요한 일이 라우팅임
라우팅을 해서 이 컴퓨터가 중간에 라우터가 자기한테 붙은 a라는 라우터 한테 패킷을 보내기로 했음 결정을 함 그게 유리하다. 아프리카 까지 가는데

그런데 뭘통해서 보내야 하나? 피지컬 레이어를 통해서 보내야 겟죠 또 
그렇다. 그걸 주고 받는건 에러가 생겼을 때 주고받는건 그위에 데이터 링크 레이어가 받을것이고 얘의 데이터링크레이어 가 또 얘의 네트워크 레이어 한테 전달을할것이고 얘의 네트워크 레이어가 다음에 자기한테 붙은 놈한테 어디한테 보낼건가를 결정해야함 

이런식으로 감 

그래서 여러분들이 많이 쓰는 tcp / ip 웹에서도 씀 
웹에서도 쓸댸 tcp/ip 할때 그 ip 라고 하는게 네트워크 레이어에 해당한다.
ip는 인터넷 프로토콜의 약자임

이거는 이 osi 7 표준이 나오기 전에 나왔는데 아직 쓰고 있음
경로배정을 하는 그런 레이어다. 

자그러면 이제 네트워크 레이어 까지 모든 것이 카바가 되는 전달 전달 해가지고 어떻게 되겠냐 아프리카 컴퓨터까지 간다. 그러면 아프리카 까지 도달하면 맨 마지막 컴퓨터가 뭘 받냐?
피지컬 레이어가 받아서 그것을 데이터링크 레이어가 전달을 할거고 위에서 올려줄것이고 에러가 없는 지 체크하고 그것을 네트워크 레이어한테 보내면 내가 최종목적지 구나를 안다. 그러면 최종목적지 와서 성공했네 그러면 이것을 누구한테 보내냐 다시? 
트랜스 포트 레이어한테 보낸다.

트랜스 포트 레이어는 뭐냐면 자 아프리카에 있는 컴퓨터하고 내컴퓨터 하고 통신을 하는거에 통신의 주체는 뭐냐? 사람? 컴퓨터에요? 더자세하게 프로세스임 
프로그램이 돌아가는거니까 
보내는 프로세스하고 받는 프로세스 
주고 받는다 고 하면 양쪽 끝단에 아프리카 컴퓨터하고 내 컴퓨터하고 내가 짠 프로그램이 돌아갈것아니냐 그게 프로세스임 

그러면 네트워크 레이어는 그 프로세스한테 전달하기 위해서 위로 보내는데 그 프로세스 한테 전달해주는 역할을 하는게 뭐냐면 트랜스포트 레이어임 

이건 호스트 api다 프로세스를 호스트 api다.

그러면 여러분들이 짠 프로그램은 어디에 붙어있는것이냐? 트랜스포트 레이어 위에서 돌아가는것이다 그러면 이제 우리들은 자 누구한테 휴대폰으로 전화를 걸잔아 그게 라우터를 거쳐서 뭐 이렇게 해서 결국은 미국사람한테 휴대폰이 울리잔아
그러면 거기까지 가서 전화를 받잔아 그러면 그때서부터 뭐가 시작이되? 트랜스포트 레이어 프로토콜이 시작이된다.

그 밑에 과정은 피지컬, 데이터, 네트워크는 해서 거기까지 간거다 이런말이다.
그러면 이제 트랜스포트 레이어하고 내가 붙었다. 내가 엔드 유저다 라고 생각하고 그 프로세스겟지만 저쪽에 아프리카 에 있는 컴퓨터에 트래슨포트 레이어하고 내 트랜스포트 레이어가 서로 내가 보내는것을 주고받고 하는게 트랜스포트 레이어인데 따라서 그거는 중간과정이 있지만 숨어져 있는것이고 전화가 연결이 됬으니까 그다음서부터는 그프로세스 프로세스 사이한테 대화하는 방법이 필요함 내가 길동이야 짱구 잘있었냐 전화 받아도 되니? 그거를 뭐라고 하냐면 엔드 투 엔드 커뮤니케이션 , 엔드 투 엔드 프로토콜 이라고 한다.

끝단끼리 얘기한다 이거다. 중간 단계는 안보인다. 자기눈엔
내가 친구네 집에 전화를했어 그러면 지하에 있는 통신선을 타고 중개선을 거쳐서 머 그 갔잔아 그떄까지 거까지 도착하게 한게 누구의 책임이냐 피지컬 레이어 데이터 링크 레이어 네트워크 레이어를 통해서 갔어 
일단 연결이 됨 그밑에 있는건 활성화 되어있음
나 홍길동이야 그러면 이제 또 네트워크 레이어 통해서 데이터링크 통해서 피지컬 레이어 통해서 저쪽 저쪽 가겟지 
그러면 끝에 있는 사람이 홍길동이야 라는것을 듣겠다 그러면 그사람은 데이터링크레이어 네트워크레이어 알필요가 없다 
자기는 이제 뭐가 중요해? 이름을 밝혔다 이게 중요함 나는 모르는 사람인데 이럴수있고 그 사이에 전화하는 예절이 필요하잔아 그게 end to end 프로토콜이고 그거를 담당 하는게 트랜스 포트 레이어에서의 역할이다.

그게 그 프로토콜의 이름이 트랜스포트 레이어가 여러가지 있는데 여러분들이 웹 브라우저할때 많이 쓰는게 tcp고 또 유명한게 udp가있다 특성이 다르다.

tcp는 전화하는 방식이고 udp 는 전보 보내는 방식임
전보는 옛날에는 이제 서울에 유학온 학생이 시골 어머니한테 등록금 보내달라고 할때 전보 붙였다 라고함 전화가 없으니까 전보하고 전화는 무슨 차이냐?

전보는 우체국에 가서 수신인 누구냐고 해서 이거 보내주세요 라고 하면 자기는 우체국에서 나오고 이게 전달이 됬는지 안됬는 모르지만 우체국에서 전달 전달 전달 해서 어머니가 밭일 하는데 전달을 하는거다. 가가지고

그러니까 tcp는 반드시 상대방하고 나 길동이야 너 전화받을래 라는 ok 사인이 있어야하는데 반해서 전보는 어머니가 받든지 말든지 나는 보내는거임 

그게 데이터 보내는 방식이 다름 통신하는 방식이 다르다.

그게 전보 방식이 udp고 그리고 전화방식이 tcp다 라고 생각하면됨
그게 트랜스포트 레이어 끝.

이게 일반적으로 통신소프트웨어 짤때 예를들어서 어떤게 통신 소프트웨어냐 
많이 쓰는 파일 트랜스퍼 서버 ftp 내가 음원 사이트를 만들었어 클라이언트 접속해서 음악을 다운받으면 그러면 통신프로그램이 필요함
그런 프로그램 짤때 그 프로그램을 어디위에서 짜는거냐 ? 바로 트랜스포트 레이어 위에서 짜게 된다.  트랜스포트 레이어 까지 있으면 인제 네트워크 숙제도 할 수가 있고 자기가 프로그램을 네트워크 서비스 프로그램을 짤 수도 있음 

보통 트랜스포트 레이어까지 배우면됨
그런데 이제 트랜스포트 레이어가 있다고 하면 여러분ㅇ ㅣ웹에 들어가가지고 어떤때 웹이 멍텅구리가 될때가 있음 로그인했는데 그러면 한참동안 멍하니 있다가 세션 복원할꺼냐 고 물어보잔아 바로 그거다 세션레이어 이사람이 어디에 접속을 하거나 어느 사이트에 로그인을 해서 이것을 다 맞치기 로그아웃을 할때까지 또는 웹브라우저 끌때까지 그거 전체를 세션이라고 본다.

그래서 중간에 하다가 무슨 문제가 생기면 그 지점으로 다시 복구를 해주는 이런역할을 하는게 세션레이어임
잘안된다. 제일 쓸대없는 레이어임

세션 레이어는 트랜스포트 레이어 위에서 우리가 따로 만들 수 있는 일종에 부가 서비스 다 라고 생각하면됨
이런거다. 내가 음원 사이트 들어가 서 로그인해서 파일을 다운 받고 있는데 받다가 중간에 짤려버렷어 그러면 다시 복구를 해서 짤린지점부터 다시 받아야 하잔아 그런것을 기억했다가 짤린 지점이 어딘지 거기서부터 다시 복구를 해서 보내주고 하는것들이 세션 레이어다. 이거는 통신 프로그램 부과 서비스 같은것이다.

세션이라는것은 뭘로 생각하면되? 우리가 원격에다가 로그인해서 뭘할때까지 로그아웃할때까지 이게 세션이다. 히스토리 같다가 저장을 하고 중간에 잘못되면 잘못된 시점으로 복원해주는 역할을 하는게 세션이다. 그런데 이런 세션레이어 하고 트랜스 포트레이어하고 또 프로그램을 짤려고하는데 내가 파일을 보내고 싶은데 저쪽에서 

트랜스 포트 레이어 까지 썻으니까 이제 접속이 됬음 접속이 됬는데 이게 파일이 위험한 파일임 보안이 요구되는 파일이다. 그러면 뭘해서 보내야하잔아 암호화를 해서 보내야 
암호화 라이브러리가 필요하잔아 그러면 부가 서비스 펑션같은것을 제공하는게 뭐냐 그게 프레젠테이션 레이어다.

그게 encryption 암호화하는거다 decryption 복호화한다.암호 푸는것이다.

그담에 우리가 뭐 외대 라고 할떄 www.hufs.ac.kr 하지만 실제로는 ip 주소를 가지고 하잔아 그게 기억못하잔아 그런걸로 통신할려고 하면 url 이름이 뭘로 바껴야 하냐? ip 주소로 바껴야 하는데 그런걸 번역해주는걸 한다 라든가 그걸 부가 서비스를 함
그리고 컴퓨터 구조시간에 리틀 엔디안, 빅엔디안 배웠다.
그런게 뭐냐 만일에 itneger 4byte가 있으면 그 순서가 큰거 서부터 들어가느냐 작은 거서부터 거꾸로 들어가느냐 가 뭐마다 다르냐? cpu 마다 다름 cpu 마다 다름 순서가 
4byte가 거꾸로 돔 어떤 cpu에서는 순서가 그런데 이 컴퓨터에서 이 것은 인텔용인데 내가 integer 하나를 트랜스 포트 레이어 한테 보냈는데 받는놈한테 받는놈은 arm cpu인데 
그게 갔는데 저쪽은 거꾸로 있다 그러면 잘 해석할 수 없다.틀린숫자가 갈것이다. 저쪽에서 해석하기에는 마찬가지로 ?? 플롯팅 포인트 
플롯팅 넘버는 뭘로 구성이 되냐? 익스포넨트 만티사 사인 으로 구성되는데 그 순서가 뒤바뀔 수가 있다. 그런것도 거꾸로 보내야한다
여러분들 기억날지 모르겠지만 C에서 struct 잡으면 어떻게 되? sruct 만들면 struct 속에 integer , char 일너거 해서 50byte 짜리 struct 만들었다 그러면 50byte를 저쪽 컴퓨터에다네트워크를 통해서 보낸다고 했을때 이 sturct를 컴파일할때 기계에 따라서 거기에 중간에 뭐가 들어가냐? padding이 들어감 왜 padding 이들어가냐? 어떤 기계는 integer 4byte짜리 integer는 메모리에서 주소가 4의 배수에서 시작해야 하는 cpu가 있음 어떤것은 짝수에서 시작해야하는것있고 어떤것은 그렇지 않은것이 있다. 그러니까 struct 만들다 보면 100번지에서 시작했는데 맨위가 char 야 그러면 101 번지가 될것이다 그리고 integer 가 나오면 104번지에서 시작해야하니까 3칸이 어떻게 되? 비게되는데 어떤 cpu에서는 그렇게 컴파일 이 안된다. 그래서 그런 sturct를 보내면 이해를 할수가 없다. 그러니까 네트워크에서 보낼때 압축해서 보내야된다 패딩을 없애서 그런거라든가 

암튼 데이터 포맷이 이탈한것이 cpu마다 달라지기 떄문에 그거 이해할려고하면 최대한 표준 포맷이 필요함 표준 포맷이라는것은 아까 integer 보낼때 내가 빅엔디안 이고 저쪽이 리틀 엔디안 일 거 같으면 뭐 저쪽 이 받을 놈이 뭔지 모르니까 내가 빅엔디안 이든 리틀엔디안이든 네트워크에서 말하는 표준 포맷으로 바꿔서 보낸다. 받는 쪽에서도 어떻게 받나? 네트워크 표준포맷으로 받아가지고 자기한테 맞게 컨버전을 해야한다. 그런것을 제공한다.

그다음에 이런것을 이용해서 이제 네트워크 프로그램을 자기가 만들어서 서비스를 만들면 어플리케이션 레이어다. 이제 여러분들이 많이쓰는 웹 브라우저 웹 서버는 뭐냐? 어플리케이션임
ftp 서버라는거 email 주고 받는거 remote login 한다던가 텔넷 이런것도 있고 
웹 브라우저 서버는 이 트랜스 포트 레이어 위에 또 무슨 프로토콜을 만들었냐? http 프로토콜 한계층을 더 만듬

그러니까 우리는 시스템 프로그램이 하는입장에서 어디까지 배워야하나? 트랜스포트 레이어 까지 배워야하고 프레젠테이션 레이어 일부를 배우게 될것이다.(이게 포인트 혹은 공부할 방향임)

## Network Protocols for Communications
네트워크 프로토콜 폴 커뮤니케이션
이게 무슨 말이냐면 
내가 ftp 음원 서버 사이트, 음악을 하나 보내달라고 해서 내가 보내달라고 하니까 음악파일 을 가져다 읽어서 보내는데 10000 byte씩 보낸다고 치자 음악이 100000 byte라고 가정을 하고 mp3 가 십만 바이트인데 내가 만 바이트씩해서 10번을 보낸다고 가정을 해 
그리고 만 바이트를 메시지라고 함 
만 바이트 보내는걸 메시지 라고함 
그런데 네트워크 프로토콜은 메시지 통째로 보낼 수가 없음 
이유는 그거는 네트워크 시간에 자세하게 배우겠지만 
일단 저쪽에 아프리카 까지 보낼려면 바로 옆에 있는 데 보내야 하는데 그런데 
옆에 있는거 한테 보낼때 이러니어시한? 데이터 링크에 대해서 완벽하게 보내야 한다 에러가 있어도
십만 바이트 데 먼저 만 바이트를 옆에서 보냈다고 치자 근데 만 바이트를 잘 받았다 라는 메시지가 와야지 내가 만바이트를 없애 버릴 수가 없다 왜 그 만 바이트를 킾 하고 있어야하나? 잘못 받았다라고 하면 그걸 다시 보내줘야하니까 
그렇다. 
그러니까 만 바이트를 보내놓고 나서 잘받았다 라는 메시지를 ack 가 올때까지 만바이트를 킾해야하는데 그 만 바이트가 너무 큰거임 그게 큰거면 어디에다 저장을 해야하나?
만일에 중간에 여기있는 라우터라고 치자 라우터 입장에서는 자기를 통해서 통신하는 컴퓨터 노드가 하나두개가 아님
자기도 막 받으면 전달을 해야하는데 단위가 만바이트라고 하는데 
만일에 100개가 접속이 되는데 만 바이트가 몇개를 킾해야하나? 100개를 킾해야 한다 메모리에 왜냐하면 이거 옆에 전달하고 잘받았다 라는게 올때까지 킾했다가 그게 안오면 다시 보내야 하니까 
그 만바이트 100개가 왔으면 너무 커지니까 어디다 쌓아 놔야 하나 ? 메모리가 모자르면 디스크에 싸놯아야 한다 
그러면 디스크 쌓으면 느린거임 통신속도가 느림 
그렇다. 그래서 설사 end 유저가 만 바이트 짜리를 보냈다고 했더라도 프로토콜에서는 이거를 생선 토막 친다. 토막을 쳐서 쪼그만 단위로 보내기 시작해 그래서 잘받았냐 라는게 오면 다음 슬라이스 보내고 이런식으로 한다. 
그거를 또 하나씩 하는게 아니라 오버랩핑을한다. 무슨말이냐면 생선회를 떠가지고 생선 전체를 보내는게 아니라 생선이 메시지 라고 하면 생선 회를 떠가지고 한 조각 보내고 잘 받았다 라는것을 받을때까지 킾해야 하는건 당연한거고 근데 한조각 을 보내는게 아니라 한번에 8개까지 보낼 수 있어 8개까지는 뭐를 안받고 보낼수있는거야? ack를 안받아도 보낼 수 있는거야 그거를 8개를 기억하면서 오버랩핑을 해나가야 빨라진다.
마치 이제 큰 문제를 알고리즘 처럼 작은 문제 로 쪼개듯이 생선 회를 쳐서 하나씩 보내는데 그게 쪼갠 조각이 뭐냐? 그게 뭐라고 하냐 그걸 패킷이라고 한다.

내가 만 바이트 메시지를 보낼려고 하면 만 바이트짜리 얘한테 보내고 얘가 그옆에 라우터한테 보내고 또 보내고 이렇게 해야되잔아 이것을 전달전달 하기떄문에 그것을 뭐라고 하냐면 전달 전달 하는것을 무슨말 쓰냐면 스위칭이라는 말을 쓴다. 스위칭이 한국말로 뭐냐면 교환 이다. 교환한다. 자꾸자꾸 간다 이말이다. 우리 입장에서 만 바이트를 보내도 tcp는 만 바이트를 받아줘 그러나 tcp속에서는 만 바이트를 한꺼번에 보내는게 아니라 그것을 횟 조각을 내서 쪼그맣게 해서 보내는데 따라서 네트워크에서는 메시지 스위칭 은 아까 같은 이유로 오버헤드가 커서 쓸 수가 없음
(덩어리 로 보내니까?..)

이것을 쪼개서 여러개의 뭘로 나눠서? 패킷으로 나눠서 보낸다.
그래서 우리가 쓰는 인터넷 tcp ip 같은경우는 패킷 스위칭을 쓴다.
패킷 스위칭 이라는 얘기는 패킷 단위로 서로 인접한 노드끼리 교환한다. 이런말임

그래서 일반적으로 뭐든 레이어 가 들어오는데 tcp 나 udp에 들어오면 이 메시지를 패킷 프레임으로 쪼갠다. 이게 보통 1.5kbyte 정도가 된다. 쪼개는데 우리가 회사에서 사장님끼리 계약이 됨 사장은 end to end layer 가됨 전무를 통해야하잔아 전무끼리 얘기가 왔다갔다 하잔아 네트워크 레이어 라고 치자 전무가 또 과장한테 보내면 과장끼리 또 전화해서 얘기해야 하잔아 그게 데이터링크 레이어라고 치고 맨 밑에 꼬봉한테 너 가서 전달해라 그러면 그게 피지컬 레이어다 이거임
이렇게 보낼려고하면 과장 전무 사장님 도장을 다 받아야함 그렇다 그렇게 하듯이 
패킷도 tcp에서 쪼개서 그것을 tcp에서 어디로 보내? 라우팅 할려고하면 ip로 보내야 함 ip로 보낼때 유저가 만든 데이터만 보내면 안됨 이게 어디서부터 어디로 간다더라 그다음에 아까 말했듯이 생선을 가져다 10조각으로 쪼개서 보내잔아 이게 생선 10토막중에서 몇번째 토막이다 이런 정보가 있어야지 처리를 할거 아니야 
그래서 뭔가 정보가 붙어야 하기떄문에 각 레이어에 내려 갈때마다 데이터 시그먼트에 뭐가 붙냐 헤더가 붙는다 이거다.
이거 출발지는 서울이고 도착지는 아프리카다. 그럼 너 이거 아프리카로 보낼려고 하면 너 니가 라우팅해 뭐 이런 정보가 있어야 겠다. 그다음에 아까 애끼했듯이 생선회를 떠서 보내는데 이게 몇번조각이다 그래야지 저쪽에서 맞출 수 있겟다. 나중에 네트워크 시간에 배우겠지만 생선회를 이렇게 자꾸 생선회를 첫번째 두번째 조각을 보내면 네트워크를 통해서 아프리카 까지 가다보면 세번째 보낸게 제일 먼저 도착할 수도 있다. 3 21  순서가 바뀔 수도있다 그러면 이게 조립이 안됨 패킷에 뭘 붙이냐? 번호를 붙인다. 그걸 8까지 붙인다 일반적으로 그정도면 충분하기떄문에
번호같은게 있어야지 재조립을 할 수 있음 그래서 그런것들 정보가 들어가는 각 레이어 마다의 헤더가 그 데이터에 붙음

그럼 tcp 시그먼트라는거는 유저가 보낸것을 쪼갠거 에다가 자기의 헤더를 붙여가지고 누구한테 보내는거냐 ip한테 보낸다. 그럼 ip는 tcp 시그먼트에다가 자기 헤더를 붙인다. 그런 데
CRC checksum 이라는것은 사이클이 일방적으로 자꾸 일어나는건데 이것도 네트워크 시간에 비움 bit이 1.5k짜리 bit을 가지고 막 이것을 더하기 빼기 해가지고 계산을 해서 무슨 값이 나온거임 첵썸이 그래서 받는쪽에서 또 이것을 받았을때 그걸 가지고 똑같은 계산을 해가지고 이게 맞아떨어져야지 중간에 변조가 안된거죠 그래서 그런 중간에 오다가 중간 부분에 에러가 생겼는지를 체크할 수 있는 첵썸 코드가 들어가는데 네트워크에서 제일 많이 쓰는게 CRC 코드라는게 들어간다. 이게 99.9 에러를 찾아낸다. 한 BIT이라도 틀리면 다 틀렸다 어디가 틀렸는지를 모르지만 아무튼 이패킷이 오다가 뭔가 잘못됫다라는건 알아낼 수 있다.그런것도 에러체크하기위해서 사이클 리던던시 코드의 약자임 (인터넷 찾아보면 나옴)

그래서 마찬가지로 이것도 똑같은 얘긴데 7개의 레이어를 말했는데 각 레이어는 자기가 그 패킷 단위를 취급할 수 있는 맥시멈 트랜스펄 유닛이 있음 
생선 회를 얼마만큼 크게 쪼개 야 하는 크기가 정해져 있어서 그걸 넘지 못한다. 뭘못하기 떄문에 메시지 스위칭은 너무 비효율 적이기때문에 잘게 쪼개서 보내야 한다는것이다.

## Network Protocols for Communications
그 각 레이어에서 만들어진 몇가지 여러가지의 ??? 
포토콜이 있음
예를들어서 여러분이 네트워크쓸때 많이 나오는 
dhcp 서버라는게 있음 이게 뭐하냐는거냐면 
학교쓸때는 pc마다 고정아이피가 할당이 되어있음 
집에서 쓸때는 통신회사를 써야하는데 컴퓨터를 킬때마다 ip 어드레스를 받아옴 그것을 유동아이피라고함 아이피 주소가 맨날 바뀜
북박이 로 할당되는 게아니라 그 유동아이피를 기계가 세팅될떄 할당해주는거를 dhcp 서버라고함 
유동 아이피 나눠주는것을 dhcp 서버라고함
그다음에 이제 통신회사에서 보통 이것을 살때는 네트워크 어뎁트 하나가 들어온다 그래가지고 집에가지고 인터넷을 쓰는데 내가 집에서 pc를 여러개를 쓴다던가 그러면 공유기를 달아서 여러개를 쓸수있는데 공유기를 달아서 여러개를 쓰는것이 nat 라는것임
그러니까 어떤 public ip를 share 해가지고 통신회사에서 그것을 하나를 받았는데 여러개 pc를 연결한다던가 그런것을 nat 라고 한다.

dns는 웹 브라우저 쓸때 뭘 쓴다고 url을쓴다. www. 뭐로 
url이라고 하는데 실제로 통신할때는 뭐 . 뭐 . 뭐 . 으로 되어있는 ip 주소를 써야하잔아 도메인 이름을 ip주소로 바꿔주는것을 도메인 네임 서버라고 한다.
도메인 네임 서버 한테 www. hufs. ac. kr을 물어보면 그거에 대한 ip주소가 날라가가지고 그걸 가지고 접속을 할 수 있는 것이다.

그다음에 vpn 이라는것은 이게 뭐냐면 만일 이게 국방 과학 연구소다.
자기네들 네부 통신망도 필요하고 또 뭐가 필요하냐면 국방 과학 연구소 에 대전 주소가 있고 서울 주소가 있는데 대전 주소하고 서울 주소 네트워크를 연결해야한다. 네트워크를 연결 할때 보안이 중요시 되는 네트워크잔아 그럼 어떻게 할까? 통신회사 가서 한가지방법은 전용선을 산다. 
대전에 에이디계 하고 서울 에이디비를 그냥 피지컬 한 라인으로 연결해서 다른거에 연결이 안됨
그선으로 통해서 가니까 누가 가로챌 염려가 없음 그걸 전용선이라고 함
그걸 통신회사한테 서울지부 하고 부산 지부로 전용선을 깔아주세요 라고 하면 그 자기네들만 전용선이 깔려가지고 보안에 대해서 강해지는것을 전용선이라고 하는데 당연히 전용선은 어떻게 되? 비싸다 그래서 어떻게 하냐면
kt 하든가 sk 에서 준 public network 을 거쳐 거쳐 가는것을 쓰는데 그것을 public network를 쓰면서도 전용선이것처럼 흉내를 내게하는 방법이 있는데 그게 vpn임
흉내를 내준다.

대전 지부에서 ??? 네트워크로 들어오면 그거 가져다 암호화를 한다. 모든 메시지를 
거기서 ip 터널링 이라고 해서 최단 경로로 해서 암호화를 통해서 서울까지 보내는 방식을 써서 마치 사용자가 느끼기 에는 전용선을 같은 효과를 내는것이 버츄얼 프라이빗 네트워크다. 

그래서 버츄얼 프라이빗 네트워크는 프라이빗을 서포터하는데 어 자기한테 북박이로 할당딘 링크가 없이 public 네트워크를 이용을 해서 하는데 암호화 같은 것을 하고 ip터널링 이라고 해서 이것을 최단경로로 쫙 보내는 중간에 깔지않고 이런 방법을 써서 마치 private 네트워크인것처럼 그렇게 서비스 를 하는게 vpn임

그다음에 tcp/ip,  udp/ip는 아까 ip는 무슨 layer 에 해당이 되냐 네트워크 layer 에 해당이된다. 네트워크 레이어의 주된 일은 라우팅 경로배정이라고 했고 그위에 트랜스포트 레이어 가 전화방식으로 통신하는게 tcp고 전보 방식으로 통신하는게 udp 라고 했다. 그래서 약간 osi reference 마다 아까 7개 계층 의 표준화 하고 는 약간 기능이 틀린것도 있지만 대체적으로 맞다. 그래서 여러분이 쓰는 ip는 네트워크 레이어 해당이되고 tcp udp는 트랜스포트 레이어 의 프로토콜에 해당이 된다. 물론 osi 만든 그 트랜스포트 레이어 도 두껍게 있는데 잘 쓰지 않고 있다.
그래서 열어보면 어플리케이션 레이어, 트랜스포트레이어, 네트워크 레이어, 데이터 링크 레이어, 나오는데 여기에 프로토콜 이 
나온 제품이나 서비스 같은것을 보면
## Protocol Examples
ftp 같은 파일 트랜스퍼 서버 같은 거 돌리때 음원 다운 받는거 파일 트랜스퍼 서버인데 그건 어플리케이션 레이어에 해당이 된다.
snmp 라는 프로토콜도 있는데 이제 어떤 kt sk 에서 라우터 깔아두면 중간에 라우터가 고장날 숭있잔아 그래서 자기네 라우터 끼리도 뭔가를 주고 받으면서 고장났니 안났니 왜고장났니 이런것을 물어보는 프로토콜이필요하잔아 snmp 네트워크 매니지 먼트가 필요한것이다. 
고장감시하기 위한

그다음에 트랜스포트 레이어는 아까 말했듯이 tcp, udp 는 유저데이터 
데이터그램이 전보란 뜻이다. 전보가 영어로 데이터그램임
일단 보내고 본다. 받든지 말든지.
그렇다.
전화 방식은 반듯이 상대 방이 따르릉 한다고해서 소용없음 전화를 받아야지 통신이 시작이 되잔아 그 차이가 있음

그다음 네트워크 레이어 프로토콜에서 여러분들이 많이 쓰는것은 ip가 되겠다 
그다음에 중간에 저쪽 컴퓨터가 고장난거 같으면 뭐 때려본다 라고 말하지? 핑 떄려본다. 대답하는지 안하는지 핑이라는 프로그램이 쓰는 것이 ICMP 가 된다. 
그러니까 요것은 네트워크 레이어 까지는 있어야 한다. 저쪽에 있는 컴퓨터한테 대답 하는지 안하는지 테스트 해보는거니까 
고 핑서비스를 하는게 인터넷 버츄어 메시지..? 머..?

IGMP는 인터넷 그륩 메시지 프로토콜인데 인제 그 통신방식에는 나중에 자세하게 배우게 되겠지만 포인트 투 포인트는 머냐 일대일 로 연결하는거 
일대일 로 연결하는건 예를들어서 분산 컴퓨팅을 할때 컴퓨터가 5섯대가 있는데 5대 끼리 연결해야된다 라고 그러면 포인트 투 포인트 링크가 몇개 필요해? 5c2 2개씩 여러개를 연결해야 하니까 그럴떄는 골치아프다 이거임

브로드 캐스팅은 먼가? 우리가 TV 회사에서 전파쏘는것은 수신기 티비랑 티비라는 수신기가 있어서 받았잔아 그런거는 브로드캐스팅 컴패니 라고 함 브로드 캐스팅 이라는것은 붙어있는 놈들한테 몽땅 다 보내는거임 누가 받던지 말던지

전부다 보내는것을 브로드 캐스팅 이라고함
근데 이제 티비 방송국 같은데서 뭘로 브로드 캐스팅 을 하냐? 전파로 브로드 캐스팅 하는거고 우리가 유선 네트워크 하면 내가 이쪽에 보내면 여기는 또 자기한테 붙은 애한테 다 보내고 그 다음 노드는 자기 붙은 애한테 다보내느식으로 브로드 캐스팅을 함

## Protocol Usages
인터넷 변송?
내가 인터넷 방송국을 차렸다. 그러면 여기에 이제 물리적으로붙을 수 있는건 1000개가 있지만 그중에 나한테 회원가입한개 50노드가 있는데 50노드한테 방송이라는걸 항상 똑같은 것을 배출하는거 아니냐 그렇다. 그렇니까 100개의 노드중에 50개 한테 똑같은 내용을 동시에 보내는것을 "멀티 캐스팅 이라고함 "
브로드캐스팅은 100개 한테 다보내는것이고 멀티캐스팅은 100개중에서 50개를 골라서 걔네들한테만 골라서 보내는것을 멀티캐스팅이라고 하고 
포인트 투 포인트는 이건 하나씩 보내는것이고
집에 IPTV나 이런것을 보내는데 IPTV나 저 케이블 티비 보면 VOD 로 영화보잔아 그건 무슨 방식이냐 포인트 투 포인트 방식 영화보는것도 다르고 시간이 다르니까 그런것은 포인트 투 포인트 고 방송으로 하는거 전체한테 다 보내는것은 브로드 캐스팅이 되는것이다.

그중에서 몇군데 만 골라서 보내는거 동시에 그거는 멀티캐스팅이라고함
IGMP는 멀티캐스팅을 하는데 사용되는 프로토콜이다.

## Protocol Usages(2)
그래서 프로토콜을 가져다 어떻게 쓰는가 하는거는 아까 얘기했듯이 앞으로 7 레이어를 얘기했잔아
7 레이어 얘기했는데 어느 레이어 까지 있으면 프로그램 짤 수있다고?
트랜스 포트 레이어 까지 있으면 프로그램 짤 수 있음
이위에서프로그램 짤 수있음
요 3개는 어플리케이션 이니까 
세션 레이어는 있어도 그만 없어도 그만이고 
프레젠테이션도 레이어도 내가 지금 라이브러리 이니까 
암호화할떄 필요하고 그렇지 않으면 안쓰는거임
그러니까 기본적으로 프로그램은 트랜스포트 레이어 위에서 짜게 된다.

이렇게 생각하면됨
그래서 프로토콜 레이어 들이있는데 프로토콜들이 tcp 도 있고 udp도 있고 
일반적으로 http 쓸때는 tcp를 통해서 ip 를통해서 데이터 링크 레이어로 내려가게 되는것이다.
데이터 링크 레이어 도 하드 웨어 인터페이스 가지고 있어서 피지컬 레이어로 보내준다.

그다음에 여러분들이 핑을 떄린다고 했는데 아까 핑때리는거는 그냥 
이 네트워크 레이어로 ICMP라는게 네트워크 왜냐하면 이것도 메시지 보내는것은 정해져 있지만 미국에 있는 컴퓨터한테 핑을 떄릴려면 뭘 거쳐서 가야해? 라우팅을 거쳐서 가야하니까 
이게 네트워크 레이어에 해당이 되는것이다.

그런데 PC에 이더넷 카드를 붙이게되면 뭐가 존재하냐? 맥 어드레스 라는게 존재함
맥 어드레스 라는게 어디넷 카드에 맥 어드레스 라는게 존재하잔아 
이게 맥 어드레스는 뭐냐면 아까 이더넷 같은 거는 어디에 붙는다고? 버스에 붙는다. 버스에 붙는데 
IP를 가지고 여기 라우터가 하나 붙어있어가지고 IP가지고는 여기까지 온다.
IP 주소를 가지고 여기까지 오는데 
여기서 이제 이놈들한테 보내는데 이 4개가 같은 산에 붙어있으니까 
이 4개 중에서 하나를 ??? 보내야 되잔아 라우터가 그떄 사용하는게 맥 어드레스다. 
그래서 아이피 주소가 들어온것을 뭘로 바꿔죠? 맥어드레스로 바꿔주는게 ARP이고 거꾸로 보낼떄는 맥어드레스가 붙어서 나가지만 라우터 에서부터 나갈때는 IP주소를 탈바꿈해서 나가는데 그게 리저브??? RARP 임 

## App. Layer Services upon Transport Protocols
사실은 여러분들이 학교에서 PC를 쓸적에 내가 할때는 여러분들이 보는건 IP주소만 보지만 사실은 나갈때는 IP주소하고 뭐가 더 필요하냐? 같은 버스 안에서는 맥 어드레스도 필요하게 되는거다.

그래서 가장 대표적인게 
트랜스포트 레이어 에서는 TCP하고 UDP 가 있다. 이것은 전화방식이고 이거는 전보방식이다.
전화를 하면은 상대 방하고 전화통화가 되면은 내가 짱구 철수 얘기헀다고 쳐보자 
그러면 짱구 철수가 저쪽에가서 철수 짱구로 바뀔 수 있어 없어? 안바뀐다. 전화는 말한 순서대로 가니까
그렇다. TCP는 전화방식이니까 내가 아까 메시지를 보내면 잘게 쪼개서 가지고 여러개가 짤게 쪼개져가지고 저쪽에서 받는쪽에서 재조립해서 전달하는데 순서가 바뀌지가 않는다 TCP는
그런데 전보방식으로 보내면 내가 시골에 있는 어머니한테 전화가 없어서 우체국으로 가서 전보를 3개를 때린다. 그러면 우편 배달부 가 받아가지고 이게 각각 3사람이 전보를 나눠주려고 돌아가면 어떤 세번째 전보가 먼저 도착 할수도 있다.
그래서 순서가 뒤짚힐 수 도있는게 머야? UDP 임

순서가 뒤짚일 수 있는건 좋은거야 나쁜거야 나쁜거임
당연히 
릴라이어블 하지 않다.
그렇지만, 장점도 있다. 장점은 전화를 걸면 상대방이 안받으면 짜증나잔아 확연결이 되잔아 상대방하고 얘기를 시작할 수 있는데 전보는 상대방이 자고있던지 뭐하던지 그냥 난 보내고 말면 되니까 간단하다.
보내는 방법이 
그대신에 보내는 순서가 여러개보내면 뒤바뀔수가 있다. 이값이 
그리고 TCP는 뭐냐면은 중간에 가다가 잃어 버리는게 있으면 그걸 복구할 수 있음 왜냐하면 순서가 있기떄문에 UDP는 전보 3개를 보냈는데 이게 다 흩어져서 감 그러니까 중간에 전보를 3개를 보냈는데 하나가 없어졌다고 그러면 
그것을 복구할 방법이 없다.
그래서 기본적으로 TCP 프로토콜이 릴라이어블하고 신뢰성이 있는 프로토콜이고
UDP는 신뢰성이 보장이 되지 않는다. 간단한 반면에 신뢰성이 보장이 되지 않는다.
그러니까 TCP는 파일 같은거를 보낼때는 파일이 크니까 쪼개가지고 여러개로 보내잔아 
그게 순서대로 전달이 되어야 하니까 파일을 같은것을 보낼때는 뭘로 보내야 하나?  TCP로 보내야 한다.
그런데 그냥 단문으로 SNS 처럼 너 밥먹으러 와 받든지 말든지 이린거는 TCP로 보내면 오버헤드가 더 크다.
그냥 한번 보내고, 한번 일회성으로 보내는 메시지 같은 경우는 UDP로 보내는게 낫다.

## 질문
프로토콜이 소켓을 쓰는게 아니니까 핑이라는 프로그램속에서 소켓을 쓰는지 모르나 프로토콜을 다른걸로 쓰니까 
ICMP 인터페이스는 잇겠지만 

그래서 TCP로 만들어진 그 어플리케이션 프로토콜을 가져다 아까 
5 트랜스펄 프로토콜은 일반적으로 신뢰성이 있어야 하잖아. ftp는 TCP로 짜는데
UDP 로 써서 만든 FTP 도 있는데 그건 TFTP 라고 한다.
간단한 버전임
그러나 신뢰성이 없다.

여러분이 텔렛을 안쓰니까 SMTP는 뭐하는데 쓰냐하면은 이메일 보내고 주고 받을때 쓰는 프로토콜임 이것도 TCP를 쓴다.
HTTP는 웹 서핑 할때 쓰는 프로토콜이고 그것은 TCP로 짜여져있다.
아까 네트워크 관리하는 프로토콜이 뭐라했냐면 장비 관리하는것 고장났냐 안났냐 이런 상태보고 하는게 SNMP 
이런것은 한번 고장났냐 가끔 가다가 한번씩 물어보면 된다.
이런것은 

## IPv4 Address Types(32bits)
네트워크는 이제 TCP/IP 나 UDP/IP를 쓰니까 기계마다 주소가 있어야 하잔아 그것을 우리가 IP주소라고 하잔아
IP 어드레스라고 하는데 엤날서부터 몇비트짜리를 썻냐면 32BIT 짜리 IP 주소를 썻다 그게 IPV4 임
그래서 이 IP는 할당해주는 기관이 있는데 외대 안에 있는 컴퓨터 경우 우리아이피에 몇번에서부터 몇번까지 쓰겠어 신고를 허락을 받아서 쓰는데
그 기관에 크기 물론 고정아이피를 받음 기관의 크기에 따라서 클래스 가 나눠진다 
A B C D 클래스로 나눠진다. 
A 클래스는 뭐냐면, 이 아이피 0으로 시작이 되는거임 7BIT이 네트워크 아이디 (미국방선이 다 예를들어서, 미국방성의 네트워크를 나타낸다.) 그런데 여기에 국방선의 ID가 들어감 미국방선 ??? 임
국방선
거기에 24 BIT의 아이피가 있으니까 거기에 컴퓨터가 몇대가 있다는 얘기냐면 2의 24승개까지 있을 수가 있다.
그러니까 이게 큰게 말이지

왜대 경우는 B타입임 학교 같은데는 
아이피 1 0 로로 시작하고 이게 왜대냐 한양대냐 서울대냐 이런 대학의 아이디가 들어갈것이고 HOST가 몇개가 있냐 2의 16개 정도 6만 4천개 정도의 아이피주소를 쓸 수 있다. 
기관을 다가지고 있는것임
회사 같은것을 한다. 회사인데 고정 아이피를 가지고 있다 그러면 C 클래스로 감 110가 될것이고 여기에 네트워크 아이디가 이런거는 기관이 많으니까 그다음에 21 BIT가 네트워크 아이디가 되는것이고 여기에는 256 개 정도의 PC를 쓸 수 있는
그런 클래스다. 

이건 나도 써보지 않아서 모르나 아까 얘기했듯이 멀티 캐스팅 하는거임 그래서 멀티 캐스트 주소를 해서 (D클래스) 멀티 캐스트 그륩 아이디를 이렇게 보내면 일로 보내면 그 그륩의 붙어있는 PC 한테 몽땅 다가는것이다.

옆에 나오는것은 IP주소인데 이건 모름 

## IPV6
이렇게 IPV4를 썻엇다 IPV4를 쓰니까 좌우지간 IP의 주소가 전세계 몇개가 있는거냐? 2의 32개승 있는거다. 그런데 이제 2천년 도 정도 에서부터 그 전이지만 뭐가 유행 하기 시작했냐면 임베디드 디바이스가 유행하기 시작했다. 임베디드 시스템 이라는것은 우리가 들고다니는 기계에서도 ip가 들어간다는 얘긴데 그런 임베디드 시스템 통신을 해야하니까 이제 ip주소가 필요한거고 그런 디바이스 무지하게 많아졌다 임베디드 다음에 3~4년 있다가 나온말이 유비쿼터스란 말이 나옴
유비쿼터스란 말이 신에손은 어디에든 있다 라는거임 무슨말이냐면 의자에도 컴퓨터를 집어넣어서 학생이 오면 출결을 체크를 하고 얼마나 동안 엉덩이를 붙이고 있었는지 이것을 체크함
그런 디바이스에 컴퓨터가 들어가니까 ip주소가 필요하게 된거고 그게 이제 유비쿼터스 시스템임 
임베디드 시스템에서 바뀐말이다.
유비쿼터스란 말이 뭘로 바꼇냐면 요새는 iot 라고 바뀜 internet of things 모들 사물에는 인터넷이 들어간다. 말이 바뀐것이다. 사실 같은말임
그렇니까 2의 32승 가지고 되냐 주소가 전세계에 수천억개의 수조개의 디바이스가 있는거 아니냐 그게 다 ip주소가 필요하니까 이걸로 부족하기 시작했다.
주소를 나눠주는게 
그래서 ipv6가 나옴 128 bit 어드레스임 
2의 128 승이라는건 어마어마함

그런데 2의 64승이냐 128승이나 얼마나 많은거냐 몇만년 지날때까지 쓸수있는 아이피임
128 비트를 나눠서 ip 주소를 나눠주는 형태가됨
128 bit 어드레스를 하고 어드레스 써야함
ipv6 를 인터너리는 쓸수가 있는데 전세계적으로 씁니까? 왜못쓰죠 
다 ipv6쓸려면 전세계 컴퓨터를 한번에 껏다가 ipv6 를 바꾼다음에 켜야 한다.
그게 힘든거임
그러나 소프트웨어는 다 나와있음. 커널속에서
내가 신고 다니는 신발도 아이피 주소가 필요한 시대가 올것이다 그게 internet of things 임

## Client/Server Model
자 일반적으로 네트워크를 통해서 톨신을 한다는것은 양쪽에
저쪽에 떨어지는 기계를 영어로 리모트 머신, 리모트 컴퓨터 
리모트라는건 원격이란 말임
그거 하고 나하고 통신을 하는건데 아까도 말했듯이 컴퓨터하고 컴퓨터가 통신하는게 아니다. 
컴퓨터 속에서 돌아가는 하나의 프로세스하고 저쪽에서 돌아가는 또다른 프로세스가 통신을 하는거임
우리가 배웠듯이
그러면 프로세스 끼리 통신을 하는데 둘이 통신을 할려고하면 먼저 전화거는놈이 있어야함
그렇져 
먼저 전화를 거는놈이 있다면 거꾸로 생각하면 저쪽에서는 전화를 기다리는 놈이 있어야함
그래야지 통신이 가능함
전화를 기다리는 놈을 항상 서버라고함
전화를 거는놈을 클라이언트라고함
네트워크 프로그램 모델을 항상 뭐라고 하냐면 무슨 모델? 서버 클라이언트 모델이라고하거나 클라이언트/ 서버 모델이라고 함
항상 그모델을 쓸수밖에 없음
전화를 먼저 해야하니까
야 통신할래 하고 뭘 보내야함
그러나 항상 저쪽에는 
음원 다운로드 사이트에서는 항상 누가 기다리고 있는거냐? 서버가 기다리고 있는것이다.
거기에 접속을 해서 내가 뭐 내려주세요 라는 클라이언트가 있기때문에 네트워크 프로그램은 전부다 클라이언트 서버 모델임
그러니까 만일에 파일 트랜스퍼 프로토콜이다. 그러면 서버 ftp 파일 트랜스퍼 서버니까 
ftp 프로토콜을 쓰는거임 ftp 서비스를 쓰는건데
ftp 서버가 있어야 하고 ftp 클라이언트가 있어야함
많이 쓰는 ftp 클라이언트가 머냐 rftp tftp 이런거
그러니까 서버프로그램이 있고 항상 클라이언트 프로그램이 있어야함 
그래서 내가 어떤 서비스를 만들었다고 그러면 네트워크를 통해서 서비스를 나는 
영화 ?? 애를 보면 vod 서버, 서비스 시스템을 만들었다 그러면 서버는 뭘 가지고 있어야 하냐면 서버는 vod 서버 프로그램을 가지고 있어야 하는거고 유저는 뭘 가지고 있어야 하냐면 vod 클라이언트 프로그램을 다운 받아가지고 설치를 해야지 둘이 통신할 수 있는거임
그러니까 항상 서버 프로그램이 있고 그게 프로세스로 돌아가고 클라이언트는 클라이언트 프로그램이 있어야함

그러니까 어떤 서비스 든지 하나 만들면 꼭 뭐가 필요해 서버 프로그램 짜야되고 유저는 뭘 다운받아? 클라이언트 프로그램을 다운받아야 되잔아 이게 귀찬아짐 그런것을 계속 써야 하는곳도 있지만 귀찮아져서 이제 무슨 아이디어 가 나온거냐면 그럼 클라이언트는 웹브라우저로 다 통일을 하자 
인터넷 익스플로우가 됫던 크롤리 됫던 어, 그래서 클라이언트는 웹브라우저가 클라이언트로 그냥 통일화를 시켜버렸고 서버는 웹 어플래케이션 서버가 돌아가고 그러니까 이런 경우에는 클라이언트가 뭘 접속을 할려고하면 클라이언트 프로그램을 다운을 받을 필요가 있다? 없다? 설치할 필요가 없다.
뭘 쓰면 되니까? 웹 브라우저를 쓰면 되니까 그대신에 이게 규격화가 됬으니까 둘사이에 무슨 프로토콜이 필요한거냐?	또다른 프로토콜이 필요함 그게 http임 
그거는 뭐냐면 웹 베이스드? 어플리케이션 이라고 한다. 
이것도 사실은 클라이언트 서버 프로그램인데 클라이언트 프로그램을 웹서버로 웹 브라우저로 통일을 해버린것이다.

그런데 여러분들 또 뭐가 나왔냐 p2p 라는게 나왔다. p2p는 peer to peer 의 약자임
이거는 뭐냐면 뭐 전에 소리바다 라는게 있었는데 음원다운받는 
이제 옆에 있는 서버들어가지 않아도 근처에 있는 사람에 음원을 다운받을 수 있고 나도 내것을 가져다 남에게 줄 수 도 있고 그게 p2p 임 이거에 정확한 뜻은 내가 있는데 나는 클라이언트도 될 수 있고 서버도 될 수 있는게 p2p임
요새 유행하는 블락체인이 머냐
블락 체인 = 비트코인은 아님
비트 코인에 이 블락체인에 하나의 example 이 되는건데 블락 체인이라는거 뭐냐면 은행에 돈을 찾을려고 하면 모든 정보는 은행에 있음 
그거는 은행이 뭘 가지고 있기 때문에 서버를 가지고 있고 나는 클라이언트 이기 떄문에 그러면 그거는 클라이언트 서버 모델임 
그런데 은행도 요새는 웹으로 함 

그런데 블락체인이라는건 은행하고 나하고 할려고 하면 뭐가 필요하죠?
장부가 있어야함 전자 장부가 있어야함 장부가 있어야함 장부를 모두 다가지고 있는거임 
다가지고 있어가지고 모든 노드가 다 서버도 될 수있고 클라이언트도 될 수있음
그래서 공용장부 , public 장부 
public 장부 를 모두다 가지고 있고 누구나 클라이언트가 되고 서버가 될 수있는데 내가 쟤한테 100만원 을 붙이고 싶어 그럼 트랜잭션이 발생함
그러면 이게 peer to peer 니까 공용 장부를 가지고 있는 놈한테 그게 다 간다. 얘한테만 가는게 아니라 전부 다감
서버가 없으니까 그래서 100명의 노드가 참가가 있다면 그거를 다 받아서 투표하는식이 되는거임
51명이 찬성을 하면 돈이 가게 된다. 그게 블락체인임

그럼 왜 51명이 찬성을 해야되냐?
서버가 관리하면 내가 오쏘리티를 주고 있는데 인제 다 각자 장부를 가지고 있으니까 중간에 어떤 놈이 사기 칠지 모른다. 그러니까 이게 거래를 성립될려면 과반수의 찬성을 받아라 이렇게 됨

그게 블락체인의 p2p 방식임

그러나 여기서 숨길 수 없는 사실은 웹이 됬던 웹 은 클라이언트 이렇고 서버가 이렇단 얘기고 p2p는 내가 서버도 될 수 있고 클라이언트도 될 수있단 얘기지만 좌우지간 통신을 할려면 변함없는 사실은 뭐가 필요하다? 서버 프로그램과 뭐가 있어야한다 클라이언트 역할을 하는 프로그램이 있어야 한다. 그러니까 결국은 통신을 할려면 서버하고 클라이언트하고 접속이 이루어지는 행위가 있어야한다.

그래서 네트워크 통신을 할려고하면 서버프로세스도 필요하고 클라이언트 프로세스도 필요함
그래서 서버하고 클라이언트하고 접속이 되어야 한다.이런말임
그래서 그러면 우리가 사람끼리 전화할때는 저사람을 아이덴티파이 할때 어떻게 하냐 번호를 가지고 확인한다. 개인별 전화번호가 있듯이 컴퓨터에 통신할 떄는 서버는 뭘로 아이덴티파이 해야되고 나 자신 클라이언트는 뭘로 아이덴티파이 해야되느냐 이런게 있을거 아니냐
그러면 그거는 구지 싸게 되는거다? 
아이피 주소라는거 , 내가 쓰는 컴퓨터에 ip주소 는 뭘 말하냐? 내가 소속되어 있는 컴퓨터를 말한다. 
그다음에 서버의 ip주소도 필요함 
클라이언트 ip 주소가 있어야하고 그다음에 
내가 쓰는 컴퓨터에서 지금 네트워크 통신을 하는게 나혼자만 하는거냐? 아니다.
프로세스 여러개가 네트워크 통신을 할 수 있잔아
그 통신을 하는 프로세스 마다 뭘 쓰냐면 각 다른 포트를 쓴다. 
포트 라는게 존재한다.
그래서 한 컴퓨터에서 지금 ftp를 쓰는거고 얘는 vod 서비스를 받고있고 얘는 웹브라우저를 한다 그러면 
3개가 다 아이디 주소는 똑같은 거임 한 기계로 들어가니까 그러나 같은 포트를 쓰는게 아니라 다른 포트를 쓴다.
포트가 100000 번까지 나가는데 
그중에서 좌우지간 포트넘버를 하나 골라서 쓸 수 있고 
유명한 서비스 예를들어서 정해져있음 
만일에 파일 트랜스퍼 프로토콜을 쓴다고 하면은 포트번호를 뭘써라? 그런게 정해져있다.
웹 서버를 쓸려면 포트 몇번을 쓸려는지 약속이 되어있다.
근데 이제 쟤하고나하고 임의의 통신하는 프로토콜 프로그램을 짤려고하면 그거는 포트를 어떻게? 약속을 해야한다.
그래서 클라이언트하고 
클러이언트도 뭘로 아이덴티파이 ? 하냐 클라이언트가 쓰는 ip주소 하고 port 번호를 아이덴티파이 하고 
서버도 자기가 쓰는 컴퓨터 ip주소하고 자기가 썻던 port 번호로 아이덴티파이를 한다. 그러니까
아이피 어드레스 2개 하고 port 번호 2개가 어떻게 되냐? 이게 연결이 접속이 이루어져야지 통신 이 될 수가 있다.

그래서 패킷은 뭘가지고 배달이 되냐? ip 주소를 가지고 배달이 되지만 결국은 목적지 컴퓨터에 도달을 하면은 그때서는 뭘보고 포트번호를 버고 해당 되는 프로세스한테 전달을 할수가 있다.

## Client/Server Model

## Client/Server Model
그래서 여기보면 서버프로세스하고 클라이언트 프로세스가 두개 컴퓨터에 나눳 ㅓ통신을 하게 되는데 
애내들 끼리 애기하는것은 뭐라고 했냐 아까 
end to end protocol
잘 계셨어요? 전화 괜찬으세요? 어 그래 괜찬아 ! 이런거지만
자기네들은 자기네들끼리 직접얘기한다고 생각을 하지만 실제로 는 이렇게 가는게 아니라 
이렇게 밑으로 내려와서 레이어를 아까 4개계층을 거쳐가지고 피지컬 레이어까지 내려가서 
밑에를 거쳐가지고 올라오는거다 .그거를 자기네들은 직접얘기한다고 생각하는데 그러나 직접얘기하는 사람끼리도 예절이 필요하잔아 그게 end to end protocol이다. 
그리고 상대방을 서로 아이덴티파이어 하는것은 뭐라고 아이피 어드레스하고 상대의 포트넘버
요 두쌍이 서로 접속이 되어야지 통신을 할수가 있다.

## Connextion - oriented vs Connectionless Communications
커넥션 오리엔티드 프로토콜 이라는게있음
이거는 한마디로 tcp임 
커넥션 오리엔티드 아까 tcp는 무슨방식? 전화방식 전화를 할려고 그러면 상대방에 가서 따르를 한다음에 상대방이 받아야지 개시가 된다. 그러니까 전화를 받으면 뭐가 성립이 된거냐 
커넥션이 된거임
접속이 되야지 통신을 할수가있다 이거임
그래서 커넥션 오리엔티드 프로토콜임

커넥션리스 커뮤니케이션은 

(ppt 그림참고)
이거 엤날에 쓰던 전화기 
여기에 전화국이 하나가 있고, 여기에 전화국이 있으면
이건 한가운대라고 치면 
여기에 가느다란 케이블 있음 수만개가 그러면 여기서도 
이제 선이 하나가 가면 이거 하나가 연결이 되서 전화를 걸면 
이 수만개의 선중에서 하나가 이제 할당이 됨
복박이로 전화를 하는동안
그다음에 이게 연결이 됨
그러니까 전화를 하는동안에 이선은 나혼자 쓰는거다 
저사람하고
그래서 이것을 서킷 스위칭이라고함
그러니까 만일에 무슨얘기냐면 여기 전화국이 중간에 하나 더 있다고 하면은 
이게 하나를 쓰고 여기서 하나를 써가지고 이거하고 이거 연결이 되어 가지고 가야할거 아니야
그래서 서킷 스위칭이라고 함
이거 하는방식이

그런대 요세는 휴대폰이 있다고 치자 (이것도 그림을 보면됨)
무선으로 가든 유선으로 가든 이게 휴대폰이 있다고하면
여기에 뭐가 있어요
기지국이 있고 두개만 거친다고 가정을 하면
이게 여기서 말을 하잔아 그럼 이 메시지를 와가지고 이게 전달을 하는데 뭘로 전달을 하냐면 
이렇게 전달을 해서 전화기로 가는거임
여기 뭐 해놓은거냐
디지털 전화기잔아
이게 뭐가 가는거야 메시지를 쪼갠게 패킷이라고 했음
말하는게 디지타이즈화 되가지고 패킷의 스트림으로 감
그러니까 여기서는 이 전화국 하고 여기있는 전화국하고 서큣을 교환을 한다. 
그렇다. 회선을 교환한다 이말임 회선교환이라는 뜻임
이거는 뭘 교환을 하냐? 패킷스위칭
패킷을 교환을 함 서로
요새는 뭘로 하는거냐 전화고 인터넷도 다 패킷 스위칭으로 함 디지타이즈화 되어버렸기 떄문에

이게 옛날에는 전화기 하나 만들어 넣을려면 오래걸리는 이유가 이거는 줄서야한다. 그런데 TCP는 패킷 스위칭을 쓰면서도 마치 뭘 흉내를 내? 전화기 하는것을 그대로 흉내를 냄 말하는게 고대로 순서대로 가니까 그래서 TCP는 여기 밑에 보면 가상적인 서큣 , 버츄어 서큣이라고 한다. 버츄어 서킷 스위칭 이라고한다.

그래서 TCP 하는방식이 일단 전화가 연결이 되어야 하니까 
그다음에 아까 말했듯이 릴라이어블 트랜스퍼 이게 말한 순서대로 없어지지 않는게 보장이 된다.
그리고 이 집 클라이언트한테 링크 셋업 해야 한다는게 옆에 괄호하고 이게 포인트 투 포인트 라는 얘기임
브로디 캐스팅이나 멀티 캐스팅이 안된다.
왜냐하면 각자 연결이 되어야하니까 다 회선이 따로 있다 이거임
그러니까 버츄어 가상적인 서킷이라고 함
따라서 이거는 TCP는 클라이언트가 많으면 어떻게 되냐 굉장히 연결을 많이해야함 
다 따로따로 해야하니까 서버가 굉장히 헐떡거린다 이말이다.

커넥션 레스 라는것은 연결 안해도 된다 이말임 왜냐 아까 전보 보낼때 연결을 하냐? SNS 보낼떄 연결 안하잔아 그냥 보내고 말잔아 그게 이거임
이거 전보 보내는 SNS 생각하면됨
그래서 이거는 메시지 하나 보낼때 적합하다.
연결을 안해도 되기때문에 그래서 서버한테 뭐 서로 통신할래 말래 안물어보고 그냥 보내는 거니까 부담이 적다.
그다음에 아까 말했듯이 브로드 캐스팅은 한꺼번에 다보낸다. 그리고 멀티캐스팅은 100개중에 50개한테 보내서 원하는 놈한테 보내는 거고 그대신에 여기 나와있는데 어 요거는 릴라이어블 하지 않다.
순서가 바뀔수도 있다 여러개를 보내면 
하나를 보내 면 괜찬은데 이거를 여러개로 보내면 순서가 바껴서 도착할 수도 있다. 언릴라이어블 하다.


