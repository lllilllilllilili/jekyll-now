---
post : layout
title : 데이터통신11
---
## 데이터통신11
데이터통신11

## 시작하기 전에 시험은
24일 4시30분

## 지연
전파지연, 전송지연, 큐잉지연, 처리지연 4가지가 있다.

강조되는것이 전파지연과 전송지연이 무슨 차이가 있는지 
고속도로 진입하는데 톨게이트를 통과하는 시간이 전송지연과 유사하고 고속도로에 들어서면
시속 100km 제한속도로 달리고 있는 발생하는 지연은 전파지연이라고 한다.

전송라인이 a에서 b사이에 2000km 다. 전송라인이 1mbps 라는 처리율을 갖는다. 라고했을때
1000 bit 짜리 데이터를 a에서 b까지 보내는데 얼마나 걸릴까?
전송지연, 1Mbps(데이터 처리율)로 톨게이트에서 처리를 해준다라고 생각하고 
빛의속도로 가는데 걸리는 시간 = 전파지연 (거리와 관련있다. 빛의 속도로 나누는)
초속 20만 km . 거리와 관련있고 
라인의 처리율, 밴드위쓰(초당 보낼 수 있는 비트수의 의미도 있다.) 관계되는것 전송지연이다. 
초당 1Mbps(1000 bit per second) 1000bit 각각을 처리할려면 1/1000초 걸림.
1msec (10^-3) 

빛의 속도는 굉장히 작은 숫자다. 전송지연 전파지연은 고속도로의 사례를 들면된다. 

## 3.45
다 km도 1000 m로 바꿔지면 쉽게 계산된다.
밀리 세컨드가 10^-3이다 정도를 숙지하자.

## 큐잉지연
직접 출발지에서 목적지 까지 노드 하나만 거치는게 아니라 노드를 계속 거쳐가는데, b까지 가는데
네트워크에서는 송신이 이루어지는데 노드 하나하나 거쳐갈때 겪에 되는 지연들이 큐잉 지연이다.
기다리는 시간
큐잉은 대기지연이다.
대기가 생기는 이유는 중간 노드에는 여러개의 트래픽들이 몰릴수가 있고 많은 트래픽이 같은 라인을 통해서 나갈려고 하면, 결국의 라인의 스피드에 비해서 들어오는 데이터 양이 많으므로 기다렸다가 나가야 한다.
그런 지연 값들이 노드하나 거칠때마다 누적이 되고, 그러면서 예측할 수 없는 다른 트래픽들의 특성에 에따라, 네트워크를 얼마나 사용하냐에 따라 달라지기 때문에 예측하기 어렵다. 
(가정, 트래픽들이 노드에 들어오느냐, 어떤 패턴으로 들어오느냐 확률적으로 표현한다. 수학적으로 복잡하다.)
지연값도 확률값이다. 평균은 어떻다. 실제 정확한 값을 말할순 없다.

## Case2(bandwidth of 5bps)
send에서 receive까지 총 5초 걸리는데, 데이터 스피드는 초당 5bit를 낸다.
밴드위쓰 딜레이 프로덕트라고 하는 값이다. 
bandwidth * delay .
A라는 곳에서 B에 데이터를 보내는데 아래쪽으로 시간이다. 
B까지 가는데 걸리는 시간은 수평라인을 지으면 A에서 B까지 가는데 걸리는 시간이다.
시간이 아래쪽으로 흘러간다. 거기에 대해서 ACK 잘받았다를 보내면 ACK가는데 걸리는시간(5초)
ACK를 한번 받을때마다 어느만큼의 데이터를 보내겠다 라고 하면
데이터를 보내고 ACK가 오면 도 데이터를 보내는 통신을 한다고 생각하자
(두번째 보낼때는 ACK가 와야 보낼수있다.)
TOTAL 걸리는 시간은 지연의 두배 곱하기 2d, 왕복시간이다 이것은
가는데 걸리는 오는데 걸리는 시간. 
이런 방식의 통신은 이 라인을 최대한 활용하기 위해서는
++얼만큼의 사이즈로 보내야 하나? 이런 상태에서 통신환경을 100% 활용할 수 있을까?
목표다.  그게 바로 bandwidth delay product 라고 한다.++
밴드 위쓰를 B라고 하면, 5초 걸려서 데이터가 가고 5초 걸려서 ACK가 오면 10초 동안에 데이터를 집어넣고 있으면 10초 동안 데이터를 계속 집어넣고 있으면 100% 활용하는 것이다.

++10초동안 내가 집어넣을 수 있는 스피드로 계속 집어넣을수있으면
이 A와 B사이의 라인을 100% 활용할 수 있다.++

2dB만큼 보내면 라인을 계속 채워서 활용하는 셈이 된다.
밴드 위쓰가 1초에 1bit 밖에 못보내면, 5초걸린다. 한 bit 보냈는데 5초걸려서 간단얘기는
5초 동안 5bit를 보낼 수 있다는 말이 된다.
그리고 여기서 ack 오는데 5초가 걸린다. 마지막 5번째 보낸다음에 쉬고 있어야 한다. 
라인을 쉬고 싶지 않다라고 생각한다면 ++ 다시 돌아오는데 걸리는 시간만큼 또 보내면,
또 다시 그 보낸것에 대한 ack 가 올것이고 계속 이어진다.++

==쉴새 없이 데이터를 보내는 스토리를 완성할 수 있다.==
그때 관심이 가질 요소가 뭐냐! bandwidth delay product 라고 한다.
이 수치를 활용해서 얼마나 큰 사이즈의 데이터를 내려보낼지 결정한다.

## 2
네트워크를 100% 활용한다는것은 나도 망하고 다른 사람도 망하는길이다.
지연 그림을 보여줬는데 큐잉지연은 ppt 그래프 처럼 나타난다.
라인을 100% 활용하면, 지연값은 큐잉 딜레이는 line을 100% 활용하려고 했다가는 지연값이
무한대로 올라간다. 대게 60~70% 라인을 활용하는 식으로 네트워크를 운영해야 딜레이를 적정한 값으로 유지할 수 있다.

a에서 b까지 라인이 1mbps 인데 1mbps 를 계속 내려보내느냐 가령 라우터가 하나있는데
남들도 쓰는데 얘들의 합이 나가는 1mbps가 되도록 유지한다. (라인이 1mps이므로)
라우터에 특정한 링크가 뽑아내는 스피드가 1mbps인데 그 링크를 사용하는 

## 라우터그림
라우터가 있고 라우터는 여러 유저가 공유한다.
라인이 1mbps일때 여러 유저들이 라인을 통해 내려보내는 총합이 1mbps를 계속 유지하면 
그게 100% 링크를 활용하는것이다. 링크의 스피드를 초과하지 않도록 유저들의 합이 1mbps 식으로 데이터를 만들어내면 100% 활용하는 것이라고 생각할지 몰라도 100% 활용하다가는 ++딜레이가무한대로 
된다.++
왜냐하면, 유저들의 데이터 패턴이 규칙적이지 않다. 데이터들은 평균 어떤 값을 갖는건지 peak 를 뽑아낼때는 데이터가 엄청 많이 나올수도 있다. 책에서 언급하는것은 평균값을 언급한다.
1mbps는 이링크의 최대 스피드고, 평균 1mbps를 만들어서 보낸다하면 평균이 갖고 있는 오류가 
평균보다 훨씬 큰값도 얼마든지 생성될 수 있고 그런것들이 길목을 차지하고 잡고 있다보면 해소되지 못하고 데이터 만들어지고 해서 딜레이가 무한대로 간다.
++라인을 100% 활용은 포기해야 한다.++

## 슬라이드없지만 길어져서 나누기!
bandwidth delay product를 가지고 라인을 꽉채워서 보낸다.
라인이 하나 있으면 이것의 단면이 밴드위스인데, 단면이 굵으면 대역폭이 커지는것이고
얇으면 대역폭이 적은것이다. 길이를 딜레이로 매칭시킬 수 있다. 
단면 곱하기 길이면 체적 이다. 밴드위스 딜레이 프로덕트는 마치 이 트렁크에 내가 갖고있는
것을 꽉채운 양이 된다. ++트렁크를 꽉꽉 채워서 데이터를 내보내면, 굉장히 무리가 온다++

그래서 네트워크에 많이 활용되지 않는다.

## 문제푸는시간 요망
3장 문제들이 시험에 내올수 있는 가능성이 크다.

## chapter 4 : 디지털전송
보내고자 하는 데이터는 디지털 데이터, 아날로그 데이터로 되어있다.
데이터는 디지털, 아날로그 형태로 채집이 됬는데 전송은 디지털 방법으로 보내는 말을 한다.

## Digital - to Digital Conversion
데이터는 원래소스, 신호는 전송의 대상을 말한다.
디지털 데이터를 디지털 시그널로 바꾸는것, 아날로그 시그널을 디지털 시그널로 바꾸는 방법

디지털 데이터를 디지털 신호로 바꾼다. 이미 디지털인데 왜 바꾸는지?
이미 디지털인데 (1과 0으로 구성되어있는 소스) 이것을 전송하기 위해서 디지털 신호로 바꾼다.
여전히 1과 0이다. 바뀌는것도

바꾸는 이유가 궁금하다.

디지털을 디지털로 바꾸는테크닉에는
Lind coding
line coding schemes
block coding
scrambling
있다.
## Line coding
항상 필요하다.
이미 디지털 데이터로 나와있는데 전송을 할때 또다시 디지털 시그널로 바꾸는데 뭔가 변화를 시킨다.
왜 할까? 
전송은 신호, 소스는 데이터라고 한다. 보내는 대상을 신호라고 한다.
데이터를 신호로 바꿔서 신호로 보낸다.
이 둘간의 관계를 보여준다.
101 을 1은 - 0은 + 한  비트를 하나의 시그널 요소로 표현하면 이런것과
1을 -에서 + 로 반씩 가고, 0은 +에서 -로 가고(잘못되었다.) 구분될수있는 형태로 가야한다.
1과 0을 구분하기 위한 시그널로 만든다.
첫번째보다 두번째가 더 복잡하다. 차별짓는 새로운 용어가 나오는데 신호요소다.
데이터요소는 한 비트가 데이터 요소인데, 신호요소는 하나의 신호가 하나의 elemenmt.

1bit를 표현하는데 신호가 두개쓰였다. -에서 +로 가는 두개의 신호가 한비트를 위해서 쓰였다.
이런 관계를 표현하기 위해서 r이라고 변수를 둔다.
r은 한 신호가 몇 비트를 표현하느냐! 
첫번째거는 하나의 신호요소가 한 비트를 표현한다. 두번째는 하나의 신호요소가 반비트를 밖에 표현못한다. 두개의 신호요소가 합해져야 한 비트를 표현한다. 1/2bit이다.

## 신호레벨
신호레벨을 여러개두면, 한비트가 아니라 두비트도 가능하다. 아래보면
11,01
하나의 element로 2bit가 표현됬다. d는 신호 요소 3개를 가지고 4bit를 표현한다. r=4/3
하나가 4/3 bit만큼 표현한다.

## 고속도로의 예
고속도로에 a에서 b까지 고속도로를 타고 가는데, 고속도로 트래픽은 자동차개수다.
자동차 속에 사람이 타고 있으면 차안에 있는 사람이 bit고 자동차가 신호다.
실제 자동차는 한시간에 100대가 지나갔다. 차안에 20명씩 타고있으면 2000사람per1hour
이게 신호의 rate이고(100대), 2000이 데이터 rate이 된다. 동격이다.
하나의 신호가, 자동차 한대가 사람으로 치면 한대당 20명이라고 하는 자동차들이 달려가면 
자동차로 따지면 시간당 100대가 지나가는데 사람으로 따지면 시간당 2000명이 된다.
++2000명이 data rate이 되고 100이 signal rate 이된다.++
r이 20이 된다. ++신호 하나가 데이터 몇 비트를 의미하느냐 20명을 의미한다.++
신호 rate s라고 하면 자동차의 rate을 l이라고 하면, s*r=bit rate 이 나온다.
++신호 rate (자동차개수) * r(자동차 한대가 사람 몇명을 태우는지) = bit rate이 나온다.++
시간당 2000명의 사람이 간다. 

## 회선코딩
데이터 전송률과 신호 전송률의 관계에서
1/r쓰는이유가 이것이다. 

c사진에서
bit rate에 비해서 signal rate은 반밖에 안된다.
한 signal이 2bit를 가져가니까 signal rate은 bit rate의 반이다.
r이 2인 케이스다. 신호 rate은 데이터 rate의 반이 된다. 
신호 rate은 데이터 rate은 bit per second 되는데
신호 rate은 ++baud rate으로 표현한다++
r의 개념이 중요하다.

## c는 뭘까?
c는 애매한 
signal rate = c * data rate * 1/r
c라는 게 왜 있냐면 101 경우에 보낼 데이터가 0000 11100 이렇다고하자.
이거에 비해서 데이터가 0101010 계속 (최악의경우에는) 반복하면 그래프는 ppt에
똑같이 8bit를 보내고 있는데 signal 이 각각 갈때 신호 element가 3개 8개 다.(변하는지점을 의미하는것같다.)

정확히 equal 이라고 해놓고 식을 표현하기 부족해서 경우에 따라서 신호가 가는 개수가 최선의 경우, 최악의 경우 보면은 변화가 있다 .c라고 하는 어떤 변수 집어넣서 0과 1 사이 값을 가져서 가장 빨리 c=1 인 케이스 

c=1인 경우는 정확히 N * 1/r을 갖는 경우로 ppt에서 8개로 신호가 표현되는 경우이고
c=0이라고 하면 몽땅 같은 값이 게속 나간다. 보낼데이터가 모두 0이라고 하면, 00000000 신호 rate이 0 이 된다. 신호가 변함이 없다. 

제일 급하게 바뀔 때가 1이고 가장 덜 바뀔때가 0이다. c는 0과 1사이 값을 갖는 임의의 값을 수식에 equal을 유지하려다 보니까 인위적으로 넣은것이다.

++그래서 c는 1/2로 생각한다++(평균값) 중간값
c값은 주어진다.

## 4.1
signal이 data를 운반하는데 r이 1인 관계다. 한 시그널이 한 비트만 가져간다.
bit rate 100kbps면 baud rate은 얼마일까? c가 0에서 1사이이면
c는 1/2로 가정하자 baud rate은 4.1 식에다 집어넣는다. 
단위는 ++baud++ 다 ! 
s=c*n*1/r 표현한다.
signal rate. 

## 회선코딩(Line Coding)
보내고자 하는 데이터가 디지털 데이터다.
디지털 데이터는 대역폭을 보면 무한대다. 그리고 비주기적이다.
비주기 함수를 주파수 도메인에서 보면은, 대역폭이 무한대다.
대역폭이 무한대 라면 전송이 불가능하다. 무한대역폭을 갖는 전송매채가 없다.

디지털데이터도 주파수 도메인에서 보면 큰덩어리가 있고 나머지 미약한 부분이 있다.
끊어서 생각할수 있다. 이만큼 대역폭을 갖는 신호다.
완벽한 모양은 못가지만, 대충 찝어져서 가더라도, 디지털장치들이 0과 1로 복구한다.

유한한 대역폭으로 디지털 시그널을 표현하고, 그것을 보낸다.
++effective bandwidth 라고 한다. (잘라서 보내는것을)++
무한하지 않고 유한하다.

잘라서 보내도 문제없다.

## 대역폭과 관련된 식
Nbps 보내면 대역폭이 얼마나 필요할까?
대역폭과 signal rate간의 관계는 sigal이 굉장히 빨리 변하면
대역폭이 커져야 한다. signal이 천천히 변하면 대역폭이 큰것을 요구하지 않는다.

대역폭과 signal의 관계는 비례관계다. 
B=(비례상수)*s
(비례상수)*n*1/r

요구되는 대역폭이 갖게 나와있다.
++중요한것은 form++
디지털데이터를 Nbps를 전송하기 위한 최소한의 밴드위쓰는 N에 비례한다.
N에 비례하는 형태 100bps에서 1000bps보낼꺼면 밴드위쓰는 10배이상이 되어야 한다.
r도 관계를 미친다. 하나의 시그널이 몇비트를 전송하느냐
역관계를 갖는다. (식을 보고 그냥 쓴것이다.)

## 채널의 대역폭이 주어지면, 최대 데이터율
대역폭을 얼만큼 가지고 있으면 최대 몇 bps를 보낼 수 있을까?
역으로 주어진것이다.

## min과 max의 관계
N=r*B/r(N에 max값, 왜? Nbps를 보내기 위해서는 최소 B라는 대역폭이 필요하다.)
B라는 대역폭이 있으면 보낼수있는 bit rate은 최대값은 N이다.

밴드위쓰가 주어졌는데, 밴드위스가 안에서 최소한 Nbps를 보낼 수 있다.
반대로, 최대 Nbps를 밴드위쓰안에서 보낼 수있다.(주어진)
